<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂãïÁîª„Éó„É≠„É≥„Éó„Éà„Ç∏„Çß„Éç„É¨„Éº„Çø</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .input-wrapper {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        select {
            cursor: pointer;
            background-color: white;
        }

        .time-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .time-input input {
            width: 80px;
            text-align: center;
        }

        .time-separator {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
            padding: 8px 12px;
            font-size: 12px;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .timeline {
            margin-bottom: 30px;
        }

        .timeline-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            gap: 20px;
            align-items: flex-start;
            transition: all 0.3s;
        }

        .timeline-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .timeline-time {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 18px;
            min-width: 100px;
            text-align: center;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-description {
            color: #495057;
            line-height: 1.6;
            margin-top: 5px;
        }

        .timeline-meta {
            color: #6c757d;
            font-size: 12px;
            margin-top: 8px;
        }

        .timeline-actions {
            display: flex;
            gap: 10px;
        }

        .output-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .output-header h3 {
            color: #495057;
            font-size: 18px;
        }

        .output-content {
            background: #2d3748;
            color: #a8dadc;
            padding: 25px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 2;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .btn-copy {
            background: #28a745;
            color: white;
        }

        .btn-copy:hover {
            background: #218838;
        }

        .btn-copy.copied {
            background: #20c997;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .input-group {
                flex-direction: column;
            }

            .timeline-item {
                flex-direction: column;
            }

            .timeline-time {
                width: 100%;
            }
        }

        .footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
            text-align: center;
            color: #6c757d;
            font-size: 13px;
            line-height: 1.8;
        }

        .footer-name {
            font-weight: 600;
            color: #667eea;
        }

        .footer-powered {
            margin-top: 8px;
            font-size: 12px;
            color: #adb5bd;
        }

        .footer-powered a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .footer-powered a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useRef } = React;

        function App() {
            const [entries, setEntries] = useState([]);
            const [seconds, setSeconds] = useState('0');
            const [frames, setFrames] = useState('00');
            const [description, setDescription] = useState('');
            const [cameraAngle, setCameraAngle] = useState('');
            const [cameraMovement, setCameraMovement] = useState('');
            const [copyStatus, setCopyStatus] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const fileInputRef = useRef(null);

            const cameraAngles = [
                { value: '', label: '„Å™„Åó' },
                { value: '„É≠„É≥„Ç∞„Ç∑„Éß„ÉÉ„Éà', label: '„É≠„É≥„Ç∞„Ç∑„Éß„ÉÉ„ÉàÔºàÂÖ®‰Ωì„ÇíÊò†„ÅôÔºâ' },
                { value: '„Éü„Éá„Ç£„Ç¢„É†„Ç∑„Éß„ÉÉ„Éà', label: '„Éü„Éá„Ç£„Ç¢„É†„Ç∑„Éß„ÉÉ„ÉàÔºà‰∏äÂçäË∫´Ôºâ' },
                { value: '„ÇØ„É≠„Éº„Ç∫„Ç¢„ÉÉ„Éó', label: '„ÇØ„É≠„Éº„Ç∫„Ç¢„ÉÉ„ÉóÔºàÈ°î„ÅÆ„Ç¢„ÉÉ„ÉóÔºâ' },
                { value: '„Ç®„ÇØ„Çπ„Éà„É™„Éº„É†„ÇØ„É≠„Éº„Ç∫„Ç¢„ÉÉ„Éó', label: '„Ç®„ÇØ„Çπ„Éà„É™„Éº„É†„ÇØ„É≠„Éº„Ç∫„Ç¢„ÉÉ„ÉóÔºàÁõÆ„ÇÑÊâã„Å™„Å©Ôºâ' },
                { value: '„Ç™„Éº„Éê„Éº„Ç∂„Ç∑„Éß„É´„ÉÄ„Éº', label: '„Ç™„Éº„Éê„Éº„Ç∂„Ç∑„Éß„É´„ÉÄ„ÉºÔºàËÇ©Ë∂ä„ÅóÔºâ' },
                { value: 'POV', label: 'POVÔºà‰∏ªË¶≥Ë¶ñÁÇπÔºâ' },
                { value: '„Éê„Éº„Éâ„Ç¢„Ç§„Éì„É•„Éº', label: '„Éê„Éº„Éâ„Ç¢„Ç§„Éì„É•„ÉºÔºàÁúü‰∏ä„Åã„Çâ‰øØÁû∞Ôºâ' },
                { value: '„Éè„Ç§„Ç¢„É≥„Ç∞„É´', label: '„Éè„Ç§„Ç¢„É≥„Ç∞„É´Ôºà‰∏ä„Åã„ÇâË¶ã‰∏ã„Çç„ÅôÔºâ' },
                { value: '„É≠„Éº„Ç¢„É≥„Ç∞„É´', label: '„É≠„Éº„Ç¢„É≥„Ç∞„É´Ôºà‰∏ã„Åã„ÇâË¶ã‰∏ä„Åí„ÇãÔºâ' },
                { value: '„ÉÄ„ÉÉ„ÉÅ„Ç¢„É≥„Ç∞„É´', label: '„ÉÄ„ÉÉ„ÉÅ„Ç¢„É≥„Ç∞„É´ÔºàÊñú„ÇÅÔºâ' }
            ];

            const cameraMovements = [
                { value: '', label: '„Å™„Åó' },
                { value: '„Éë„É≥', label: '„Éë„É≥ÔºàÂ∑¶Âè≥„Å´ÊåØ„ÇãÔºâ' },
                { value: '„ÉÜ„Ç£„É´„Éà', label: '„ÉÜ„Ç£„É´„ÉàÔºà‰∏ä‰∏ã„Å´ÊåØ„ÇãÔºâ' },
                { value: '„Éâ„É™„Éº„Ç§„É≥', label: '„Éâ„É™„Éº„Ç§„É≥ÔºàË¢´ÂÜô‰Ωì„Å´Ëøë„Å•„ÅèÔºâ' },
                { value: '„Éâ„É™„Éº„Ç¢„Ç¶„Éà', label: '„Éâ„É™„Éº„Ç¢„Ç¶„ÉàÔºàË¢´ÂÜô‰Ωì„Åã„ÇâÈÅ†„Åñ„Åã„ÇãÔºâ' },
                { value: '„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞', label: '„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞ÔºàË¢´ÂÜô‰Ωì„ÇíËøΩ„ÅÜÔºâ' },
                { value: '„Ç∫„Éº„É†„Ç§„É≥', label: '„Ç∫„Éº„É†„Ç§„É≥' },
                { value: '„Ç∫„Éº„É†„Ç¢„Ç¶„Éà', label: '„Ç∫„Éº„É†„Ç¢„Ç¶„Éà' },
                { value: 'ÊâãÊåÅ„Å°„Ç´„É°„É©', label: 'ÊâãÊåÅ„Å°„Ç´„É°„É©ÔºàÊè∫„Çå„ÇãÔºâ' },
                { value: '„Çπ„Çø„Éì„É©„Ç§„Ç∂„Éº', label: '„Çπ„Çø„Éì„É©„Ç§„Ç∂„ÉºÔºàÊªë„Çâ„Åã„Å´ÁßªÂãïÔºâ' },
                { value: '„Ç™„Éº„Éì„ÉÉ„Éà', label: '„Ç™„Éº„Éì„ÉÉ„ÉàÔºàË¢´ÂÜô‰Ωì„ÅÆÂë®„Çä„ÇíÂõû„ÇãÔºâ' }
            ];

            const addEntry = () => {
                if (!description.trim()) {
                    alert('„Ç∑„Éº„É≥„ÅÆÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }

                const normalizedSeconds = Math.max(0, parseInt(seconds) || 0);
                const normalizedFrames = Math.min(Math.max(0, parseInt(frames) || 0), 99);

                if (editingId !== null) {
                    // Á∑®ÈõÜ„É¢„Éº„ÉâÔºöÊó¢Â≠ò„Ç®„É≥„Éà„É™„ÇíÊõ¥Êñ∞
                    setEntries(entries.map(entry => 
                        entry.id === editingId 
                            ? {
                                ...entry,
                                seconds: normalizedSeconds,
                                frames: normalizedFrames,
                                description: description.trim(),
                                cameraAngle: cameraAngle,
                                cameraMovement: cameraMovement
                            }
                            : entry
                    ));
                    setEditingId(null);
                } else {
                    // Êñ∞Ë¶èËøΩÂä†„É¢„Éº„Éâ
                    const newEntry = {
                        id: Date.now(),
                        seconds: normalizedSeconds,
                        frames: normalizedFrames,
                        description: description.trim(),
                        cameraAngle: cameraAngle,
                        cameraMovement: cameraMovement
                    };
                    setEntries([...entries, newEntry]);
                }

                setSeconds('0');
                setFrames('00');
                setDescription('');
                setCameraAngle('');
                setCameraMovement('');
            };

            const deleteEntry = (id) => {
                setEntries(entries.filter(entry => entry.id !== id));
                if (editingId === id) {
                    cancelEdit();
                }
            };

            const editEntry = (entry) => {
                setSeconds(String(entry.seconds));
                setFrames(String(entry.frames).padStart(2, '0'));
                setDescription(entry.description);
                setCameraAngle(entry.cameraAngle || '');
                setCameraMovement(entry.cameraMovement || '');
                setEditingId(entry.id);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const cancelEdit = () => {
                setEditingId(null);
                setSeconds('0');
                setFrames('00');
                setDescription('');
                setCameraAngle('');
                setCameraMovement('');
            };

            const sortedEntries = useMemo(() => {
                return [...entries].sort((a, b) => {
                    const timeA = a.seconds * 100 + Math.min(Math.max(a.frames, 0), 99);
                    const timeB = b.seconds * 100 + Math.min(Math.max(b.frames, 0), 99);
                    return timeA - timeB;
                });
            }, [entries]);

            const generatePrompt = () => {
                if (sortedEntries.length === 0) return '';

                let prompt = '';

                sortedEntries.forEach((entry, index) => {
                    const normalizedFrames = Math.min(Math.max(entry.frames, 0), 99);
                    const timeCode = `${entry.seconds}:${String(normalizedFrames).padStart(2, '0')}`;
                    
                    let line = `${timeCode} `;
                    
                    // „Ç´„É°„É©„Ç¢„É≥„Ç∞„É´„Å®„É†„Éº„Éñ„É°„É≥„Éà„ÇíËøΩÂä†
                    const cameraInfo = [];
                    if (entry.cameraAngle) cameraInfo.push(entry.cameraAngle);
                    if (entry.cameraMovement) cameraInfo.push(entry.cameraMovement);
                    
                    if (cameraInfo.length > 0) {
                        line += `[${cameraInfo.join('„ÄÅ')}] `;
                    }
                    
                    line += entry.description;
                    
                    prompt += line + '\n';
                });

                return prompt;
            };

            const copyToClipboard = () => {
                const prompt = generatePrompt();
                navigator.clipboard.writeText(prompt).then(() => {
                    setCopyStatus(true);
                    setTimeout(() => setCopyStatus(false), 2000);
                });
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && e.ctrlKey) {
                    addEntry();
                }
            };

            const exportToJSON = () => {
                const dataStr = JSON.stringify(entries, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `video-timeline-${new Date().getTime()}.json`;
                link.click();
                URL.revokeObjectURL(url);
            };

            const importFromJSON = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const imported = JSON.parse(e.target.result);
                        if (Array.isArray(imported)) {
                            setEntries(imported);
                            alert('JSON„Éï„Ç°„Ç§„É´„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„ÅüÔºÅ');
                        } else {
                            alert('ÁÑ°Âäπ„Å™JSON„Éï„Ç°„Ç§„É´ÂΩ¢Âºè„Åß„Åô');
                        }
                    } catch (error) {
                        alert('JSON„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            };

            const insertAtPosition = (targetSeconds, targetFrames) => {
                const normalizedSeconds = Math.max(0, targetSeconds);
                const normalizedFrames = Math.min(Math.max(0, targetFrames), 99);
                setSeconds(String(normalizedSeconds));
                setFrames(String(normalizedFrames).padStart(2, '0'));
                setEditingId(null); // Cancel edit mode when inserting
                document.querySelector('textarea').focus();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            return (
                <div className="container">
                    <h1>üé¨ ÂãïÁîª„Éó„É≠„É≥„Éó„Éà„Ç∏„Çß„Éç„É¨„Éº„Çø</h1>
                    <p className="subtitle">ÂãïÁîªÁîüÊàêAI„ÅÆ„Åü„ÇÅ„ÅÆ„Çø„Ç§„É†„É©„Ç§„É≥„Éó„É≠„É≥„Éó„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åó„Çá„ÅÜ</p>

                    <div className="input-section">
                        {editingId !== null && (
                            <div style={{
                                background: '#d4edda',
                                color: '#155724',
                                padding: '12px 20px',
                                borderRadius: '8px',
                                marginBottom: '20px',
                                border: '2px solid #c3e6cb',
                                fontWeight: '600'
                            }}>
                                ‚úèÔ∏è Á∑®ÈõÜ„É¢„Éº„Éâ: „Ç∑„Éº„É≥„ÇíÁ∑®ÈõÜ‰∏≠„Åß„Åô
                            </div>
                        )}
                        <div className="input-group">
                            <div className="input-wrapper" style={{flex: '0 0 auto'}}>
                                <label>‚è±Ô∏è ÊôÇÈñìÊåáÂÆö</label>
                                <div className="time-input">
                                    <input
                                        type="number"
                                        min="0"
                                        value={seconds}
                                        onChange={(e) => {
                                            const val = parseInt(e.target.value) || 0;
                                            setSeconds(String(Math.max(val, 0)));
                                        }}
                                        placeholder="Áßí"
                                    />
                                    <span className="time-separator">:</span>
                                    <input
                                        type="number"
                                        min="0"
                                        max="99"
                                        value={frames}
                                        onChange={(e) => {
                                            const val = parseInt(e.target.value) || 0;
                                            setFrames(String(Math.min(Math.max(val, 0), 99)));
                                        }}
                                        placeholder="„Éï„É¨„Éº„É†"
                                    />
                                </div>
                            </div>

                            <div className="input-wrapper">
                                <label>üé• „Ç´„É°„É©„Ç¢„É≥„Ç∞„É´</label>
                                <select
                                    value={cameraAngle}
                                    onChange={(e) => setCameraAngle(e.target.value)}
                                >
                                    {cameraAngles.map(angle => (
                                        <option key={angle.value} value={angle.value}>
                                            {angle.label}
                                        </option>
                                    ))}
                                </select>
                            </div>

                            <div className="input-wrapper">
                                <label>üìπ „Ç´„É°„É©„É†„Éº„Éñ„É°„É≥„Éà</label>
                                <select
                                    value={cameraMovement}
                                    onChange={(e) => setCameraMovement(e.target.value)}
                                >
                                    {cameraMovements.map(movement => (
                                        <option key={movement.value} value={movement.value}>
                                            {movement.label}
                                        </option>
                                    ))}
                                </select>
                            </div>
                        </div>

                        <div className="input-group">
                            <div className="input-wrapper">
                                <label>üìù „Ç∑„Éº„É≥„ÅÆÂÜÖÂÆπ</label>
                                <textarea
                                    value={description}
                                    onChange={(e) => setDescription(e.target.value)}
                                    onKeyPress={handleKeyPress}
                                    placeholder="‰æã: @sama „Çπ„ÉÜ„Éº„Ç∏„ÅßÂÖ¨Êºî„Åó„Å¶„ÅÑ„Çã"
                                />
                            </div>
                        </div>

                        <div style={{display: 'flex', gap: '10px'}}>
                            <button className="btn-primary" onClick={addEntry}>
                                {editingId !== null ? '‚úèÔ∏è „Ç∑„Éº„É≥„ÇíÊõ¥Êñ∞' : '‚ûï „Ç∑„Éº„É≥„ÇíËøΩÂä† (Ctrl+Enter)'}
                            </button>
                            {editingId !== null && (
                                <button className="btn-secondary" onClick={cancelEdit}>
                                    ‚ùå „Ç≠„É£„É≥„Çª„É´
                                </button>
                            )}
                        </div>
                    </div>

                    <div className="timeline">
                        <h3 style={{marginBottom: '15px', color: '#495057'}}>üìπ „Çø„Ç§„É†„É©„Ç§„É≥</h3>
                        {sortedEntries.length === 0 ? (
                            <div className="empty-state">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                                <p>„Åæ„Å†„Ç∑„Éº„É≥„ÅåËøΩÂä†„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</p>
                                <p style={{fontSize: '12px', marginTop: '10px'}}>‰∏ä„ÅÆ„Éï„Ç©„Éº„É†„Åã„Çâ„Ç∑„Éº„É≥„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                            </div>
                        ) : (
                            <>
                                {sortedEntries.map((entry, index) => {
                                    // „Éï„É¨„Éº„É†„Çí0-99„Å´Ê≠£Ë¶èÂåñ
                                    const normalizedFrames = Math.min(Math.max(entry.frames, 0), 99);
                                    const timeCode = `${entry.seconds}:${String(normalizedFrames).padStart(2, '0')}`;
                                    const milliseconds = (entry.seconds * 1000 + normalizedFrames * 10).toFixed(0);
                                    const cameraInfo = [];
                                    if (entry.cameraAngle) cameraInfo.push(entry.cameraAngle);
                                    if (entry.cameraMovement) cameraInfo.push(entry.cameraMovement);
                                    
                                    // Ââç„ÅÆ„Ç®„É≥„Éà„É™„Å®„ÅÆÈñì„ÅÆÊôÇÈñì„ÇíË®àÁÆó
                                    let beforeSeconds = 0;
                                    let beforeFrames = 0;
                                    if (index > 0) {
                                        const prevEntry = sortedEntries[index - 1];
                                        // Ââç„ÅÆ„Ç®„É≥„Éà„É™„ÅÆ„Éï„É¨„Éº„É†„ÇíÊ≠£Ë¶èÂåñ
                                        const prevTotalFrames = prevEntry.seconds * 100 + Math.min(prevEntry.frames, 99);
                                        // ÁèæÂú®„ÅÆ„Ç®„É≥„Éà„É™„ÅÆ„Éï„É¨„Éº„É†„ÇíÊ≠£Ë¶èÂåñ
                                        const currentTotalFrames = entry.seconds * 100 + Math.min(entry.frames, 99);
                                        // ‰∏≠ÈñìÁÇπ„ÇíË®àÁÆó
                                        const midTotalFrames = Math.floor((prevTotalFrames + currentTotalFrames) / 2);
                                        beforeSeconds = Math.floor(midTotalFrames / 100);
                                        beforeFrames = midTotalFrames % 100;
                                    }

                                    // Ê¨°„ÅÆ„Ç®„É≥„Éà„É™„Å®„ÅÆÈñì„ÅÆÊôÇÈñì„ÇíË®àÁÆó
                                    let afterSeconds = entry.seconds;
                                    let afterFrames = normalizedFrames + 10;
                                    if (afterFrames >= 100) {
                                        afterSeconds += 1;
                                        afterFrames = afterFrames % 100;
                                    }
                                    
                                    return (
                                        <React.Fragment key={entry.id}>
                                            {index === 0 && (entry.seconds > 0 || normalizedFrames > 0) ? (
                                                <div style={{textAlign: 'center', margin: '10px 0'}}>
                                                    <button 
                                                        className="btn-secondary"
                                                        onClick={() => insertAtPosition(0, 0)}
                                                        style={{fontSize: '12px', padding: '8px 16px'}}
                                                    >
                                                        ‚¨ÜÔ∏è ÊúÄÂàù„Å´ËøΩÂä† (0:00)
                                                    </button>
                                                </div>
                                            ) : null}
                                            {index > 0 && (
                                                <div style={{textAlign: 'center', margin: '10px 0'}}>
                                                    <button 
                                                        className="btn-secondary"
                                                        onClick={() => insertAtPosition(beforeSeconds, beforeFrames)}
                                                        style={{fontSize: '12px', padding: '8px 16px'}}
                                                    >
                                                        ‚¨ÜÔ∏è „Åì„Åì„Å´ËøΩÂä† ({beforeSeconds}:{String(beforeFrames).padStart(2, '0')})
                                                    </button>
                                                </div>
                                            )}
                                            <div 
                                                className="timeline-item"
                                                style={{
                                                    borderColor: editingId === entry.id ? '#28a745' : '#e9ecef',
                                                    backgroundColor: editingId === entry.id ? '#f0fff4' : 'white',
                                                    borderWidth: editingId === entry.id ? '3px' : '2px'
                                                }}
                                            >
                                                <div className="timeline-time">{timeCode}</div>
                                                <div className="timeline-content">
                                                    {cameraInfo.length > 0 && (
                                                        <div style={{
                                                            color: '#667eea',
                                                            fontWeight: '600',
                                                            fontSize: '13px',
                                                            marginBottom: '5px'
                                                        }}>
                                                            üé• {cameraInfo.join(' ‚Ä¢ ')}
                                                        </div>
                                                    )}
                                                    <div className="timeline-description">{entry.description}</div>
                                                    <div className="timeline-meta">
                                                        {milliseconds}ms
                                                    </div>
                                                </div>
                                                <div className="timeline-actions">
                                                    <button 
                                                        className="btn-secondary" 
                                                        onClick={() => editEntry(entry)}
                                                        style={{
                                                            backgroundColor: editingId === entry.id ? '#28a745' : '#6c757d',
                                                            color: 'white'
                                                        }}
                                                    >
                                                        ‚úèÔ∏è Á∑®ÈõÜ
                                                    </button>
                                                    <button 
                                                        className="btn-danger" 
                                                        onClick={() => deleteEntry(entry.id)}
                                                    >
                                                        üóëÔ∏è ÂâäÈô§
                                                    </button>
                                                </div>
                                            </div>
                                            {index === sortedEntries.length - 1 && (
                                                <div style={{textAlign: 'center', margin: '10px 0'}}>
                                                    <button 
                                                        className="btn-secondary"
                                                        onClick={() => insertAtPosition(afterSeconds, afterFrames)}
                                                        style={{fontSize: '12px', padding: '8px 16px'}}
                                                    >
                                                        ‚¨áÔ∏è ÊúÄÂæå„Å´ËøΩÂä† ({afterSeconds}:{String(afterFrames).padStart(2, '0')})
                                                    </button>
                                                </div>
                                            )}
                                        </React.Fragment>
                                    );
                                })}
                            </>
                        )}
                    </div>

                    {sortedEntries.length > 0 && (
                        <div className="output-section">
                            <div className="output-header">
                                <h3>üìã ÁîüÊàê„Åï„Çå„Åü„Éó„É≠„É≥„Éó„Éà</h3>
                                <button 
                                    className={`btn-copy ${copyStatus ? 'copied' : ''}`}
                                    onClick={copyToClipboard}
                                >
                                    {copyStatus ? '‚úÖ „Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü!' : 'üìÑ „Ç≥„Éî„Éº'}
                                </button>
                            </div>
                            <div className="output-content">
                                {generatePrompt()}
                            </div>
                        </div>
                    )}

                    <div style={{display: 'flex', justifyContent: 'center', gap: '10px', marginTop: '30px', paddingTop: '30px', borderTop: '2px solid #e9ecef'}}>
                        <button 
                            className="btn-secondary" 
                            onClick={exportToJSON}
                            disabled={entries.length === 0}
                            style={{opacity: entries.length === 0 ? 0.5 : 1}}
                        >
                            üíæ JSON„Ç®„ÇØ„Çπ„Éù„Éº„Éà
                        </button>
                        <input
                            ref={fileInputRef}
                            type="file"
                            accept=".json"
                            onChange={importFromJSON}
                            style={{display: 'none'}}
                        />
                        <button 
                            className="btn-secondary"
                            onClick={() => fileInputRef.current?.click()}
                        >
                            üìÇ JSON„Ç§„É≥„Éù„Éº„Éà
                        </button>
                    </div>

                    <div className="footer">
                        <div>
                            ¬© {new Date().getFullYear()} <span className="footer-name">„Åü„Å¨</span>. All rights reserved.
                        </div>
                        <div className="footer-powered">
                            Powered by <a href="https://www.anthropic.com/claude" target="_blank" rel="noopener noreferrer">Claude Sonnet 4.5</a>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>