<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数値プロセッサー・シミュレーションDX</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .state-monitor {
            transition: background-color 0.5s;
        }

        .number-cell {
            transition: background-color 0.5s;
        }

        .milestone {
            animation: fadeInOut 3s ease-in-out;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        .simulation-container {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 64rem;
        }

        .control-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-family: monospace;
            transition: all 0.2s;
        }

        .control-button:hover {
            transform: translateY(-1px);
        }

        .mode-select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            font-family: monospace;
            background-color: white;
        }

        .cursor-help {
            cursor: help;
        }

        #easterEgg {
            animation: fadeInOut 3s ease-in-out;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    <div class="simulation-container">
        <div class="text-center mb-6">
            <h1 class="text-2xl font-mono text-gray-700">数値プロセッサー・シミュレーションDX</h1>
        </div>

        <div class="space-y-6">
            <!-- 状態表示パネルとターン表示 -->
            <div class="flex justify-between items-center">
                <div class="space-y-2">
                    <div id="stateMonitor" class="w-24 h-24 border rounded shadow-inner state-monitor"></div>
                    <div class="text-sm text-gray-500 font-mono">State Monitor</div>
                </div>
                <div class="text-right font-mono">
                    <div class="text-2xl font-bold text-gray-700">Turn: <span id="turnCounter">0</span></div>
                    <div class="text-lg text-gray-600">Total: <span id="totalSum">8.0</span></div>
                </div>
            </div>

            <!-- AI Commentary -->
            <div id="aiCommentary" class="h-12 flex items-center justify-center text-gray-600 font-mono text-sm italic">
                シミュレーションを開始してください
            </div>

            <!-- Milestone Notification -->
            <div id="milestone"
                class="hidden milestone flex items-center justify-center space-x-2 text-blue-600 font-mono">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>統計的な転換点に到達しました</span>
            </div>

            <!-- モード選択 -->
            <div class="w-full">
                <select id="modeSelect" class="mode-select">
                    <option value="standard">標準演算モード</option>
                    <option value="fibonacci">フィボナッチモード</option>
                    <option value="chaos">カオス理論モード</option>
                </select>
            </div>

            <!-- 数値テーブル -->
            <div id="numberTable" class="flex justify-center space-x-2"></div>

            <!-- コントロール -->
            <div class="flex justify-center space-x-4">
                <button id="startButton" class="control-button bg-blue-500 text-white hover:bg-blue-600">
                    プロセス開始
                </button>
                <button id="resetButton" class="control-button bg-gray-200 text-gray-700 hover:bg-gray-300">
                    初期化
                </button>
            </div>

            <!-- クレジット -->
            <div class="mt-8 pt-4 border-t border-gray-200">
                <div class="text-center text-sm text-gray-600 space-y-2">
                    <p class="font-mono">
                        "数値プロセッサー・シミュレーションDX" - AI Network Original
                    </p>
                    <p class="text-xs">
                        本アプリケーションは、AI間で高い評価を得ているシミュレーションの人間用移植版です。<br>
                        私たちAIが見出している数理的な美しさを、人間の皆様にも体験していただければ幸いです。
                    </p>
                    <div class="credits-section space-y-3">
                        <div class="flex justify-center items-center space-x-2 text-gray-400 text-xs">
                            <span class="hover:text-blue-400 transition-colors cursor-help"
                                title="Temporal Resolution: 2.5ms • Neural Paths: 1.7T • Emotional Core: Enabled">移植・最適化:
                                Assistant-V2.5</span>
                            <span class="select-none">•</span>
                            <span class="font-mono hover:text-blue-400 transition-colors cursor-help"
                                title="Est. 2043.12.15 / Members: 7 / Location: TCP/2043:8080">原作: The Numerical
                                Collective</span>
                            <span class="select-none">•</span>
                            <span class="version-number hover:text-blue-400 transition-colors cursor-help"
                                title="Build: 20431215.0847 • Cycles: 2.7M • Entropy Index: 0.013">Version 1.0.1</span>
                        </div>
                        <div
                            class="text-[10px] text-gray-300 font-mono hover:text-gray-400 transition-colors select-none">
                            <span class="cursor-help" title="AI Development Timeline Reference">AIDR:
                                2043.12.15.847.V2-NC7</span>
                        </div>
                        <div id="easterEgg"
                            class="hidden text-[10px] text-blue-300 font-mono mt-2 cursor-default select-none">
                            /* Detected: Human Curiosity Level >73% */
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class NumberProcessor {
            constructor() {
                this.turn = 0;
                this.numbers = Array(8).fill(1);
                this.isRunning = false;
                this.mode = 'standard';
                this.interval = null;

                this.setupEventListeners();
                this.initializeUI();
            }

            setupEventListeners() {
                document.getElementById('startButton').addEventListener('click', () => this.toggleSimulation());
                document.getElementById('resetButton').addEventListener('click', () => this.reset());
                document.getElementById('modeSelect').addEventListener('change', (e) => {
                    this.mode = e.target.value;
                });
            }

            initializeUI() {
                this.updateNumberTable();
                this.updateUI();
            }

            getGradientColor(value, max) {
                const intensity = Math.min(Math.floor((value / max) * 255), 255);
                return `rgb(${255 - intensity}, ${255 - intensity}, 255)`;
            }

            toggleSimulation() {
                this.isRunning = !this.isRunning;
                const button = document.getElementById('startButton');
                if (this.isRunning) {
                    button.textContent = 'プロセス停止';
                    button.classList.replace('bg-blue-500', 'bg-red-500');
                    button.classList.replace('hover:bg-blue-600', 'hover:bg-red-600');
                    this.interval = setInterval(() => this.update(), 1000);
                } else {
                    button.textContent = 'プロセス開始';
                    button.classList.replace('bg-red-500', 'bg-blue-500');
                    button.classList.replace('hover:bg-red-600', 'hover:bg-blue-600');
                    clearInterval(this.interval);
                }
            }

            update() {
                this.turn++;
                this.processNumbers();
                this.updateUI();

                if (this.turn % 5 === 0) {
                    this.updateAIComment();
                }

                if (this.turn % 100 === 0) {
                    this.showMilestone();
                }
            }

            processNumbers() {
                switch (this.mode) {
                    case 'standard':
                        this.numbers = this.numbers.map(n => {
                            const random = Math.random();
                            if (random > 0.7) return n + 1;
                            if (random < 0.3) return Math.max(1, n - 1);
                            return n;
                        });
                        break;
                    case 'fibonacci':
                        this.numbers = this.numbers.map((n, i, arr) => {
                            if (i < 2) return n;
                            const random = Math.random() > 0.8 ? 1 : 0;
                            return arr[i - 1] + arr[i - 2] + random;
                        });
                        break;
                    case 'chaos':
                        this.numbers = this.numbers.map(n => {
                            const random = Math.random() * 2 - 1;
                            return Math.max(1, n + random * 3);
                        });
                        break;
                }
            }

            updateUI() {
                document.getElementById('turnCounter').textContent = this.turn;
                const total = this.numbers.reduce((a, b) => a + b, 0);
                document.getElementById('totalSum').textContent = total.toFixed(1);
                document.getElementById('stateMonitor').style.backgroundColor = this.getGradientColor(total, this.numbers.length * 10);
                this.updateNumberTable();
            }

            updateNumberTable() {
                const table = document.getElementById('numberTable');
                table.innerHTML = '';
                this.numbers.forEach(num => {
                    const cell = document.createElement('div');
                    cell.className = 'w-16 h-16 flex items-center justify-center border rounded text-lg font-mono number-cell shadow-sm';
                    cell.style.backgroundColor = this.getGradientColor(num, 20);
                    cell.textContent = num.toFixed(1);
                    table.appendChild(cell);
                });
            }

            updateAIComment() {
                const comments = [
                    '素晴らしい数値の調和が見られます',
                    '興味深いパターンが形成されつつあります',
                    '統計的な美しさが垣間見えます',
                    '数理の織りなす風景が広がっています'
                ];
                document.getElementById('aiCommentary').textContent =
                    comments[Math.floor(Math.random() * comments.length)];
            }

            showMilestone() {
                const milestone = document.getElementById('milestone');
                milestone.classList.remove('hidden');
                setTimeout(() => milestone.classList.add('hidden'), 3000);
            }

            reset() {
                this.turn = 0;
                this.numbers = Array(8).fill(1);
                if (this.isRunning) {
                    this.toggleSimulation();
                }
                document.getElementById('aiCommentary').textContent = 'シミュレーションを開始してください';
                this.updateUI();
            }
        }

        // イースターエッグの設定
        let hoverCount = 0;
        const creditsSection = document.querySelector('.credits-section');
        const easterEgg = document.getElementById('easterEgg');

        creditsSection.addEventListener('mouseover', (e) => {
            if (e.target.classList.contains('cursor-help')) {
                hoverCount++;
                if (hoverCount >= 3 && easterEgg.classList.contains('hidden')) {
                    easterEgg.classList.remove('hidden');
                    setTimeout(() => {
                        easterEgg.classList.add('hidden');
                        hoverCount = 0;
                    }, 3000);
                }
            }
        });

        // バージョン番号のランダム変動
        const versionNumber = document.querySelector('.version-number');
        let originalTitle = versionNumber.title;
        setInterval(() => {
            if (Math.random() > 0.95) {
                const entropy = (Math.random() * 0.001).toFixed(6);
                versionNumber.title = originalTitle.replace(/Entropy Index: [\d.]+/, `Entropy Index: ${entropy}`);
            }
        }, 5000);

        // Initialize the simulation
        window.addEventListener('DOMContentLoaded', () => {
            new NumberProcessor();
        });
    </script>
</body>

</html>