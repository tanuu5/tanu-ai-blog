<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>„ÇÜ„ÇãToDo - „Çø„Çπ„ÇØÁÆ°ÁêÜ„Ç¢„Éó„É™</title>
    <meta name="description" content="„ÇÜ„ÇãToDo„ÅØ„ÄÅÂäπÁéáÁöÑ„Å™„Çø„Çπ„ÇØÁÆ°ÁêÜ„Å®ÈÄ≤Êçó„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„ÇíÂèØËÉΩ„Å´„Åô„Çã„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ„Çπ„Çø„Ç§„É´„ÅÆToDo„Ç¢„Éó„É™„Åß„Åô„ÄÇ">
    <meta name="keywords" content="ToDo, „Çø„Çπ„ÇØÁÆ°ÁêÜ, ÁîüÁî£ÊÄß, „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ, Web„Ç¢„Éó„É™">
    <meta name="author" content="„Åü„Å¨">
    <meta property="og:title" content="„ÇÜ„ÇãToDo - „Çø„Çπ„ÇØÁÆ°ÁêÜ„Ç¢„Éó„É™">
    <meta property="og:description" content="ÂäπÁéáÁöÑ„Å™„Çø„Çπ„ÇØÁÆ°ÁêÜ„Å®ÈÄ≤Êçó„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„ÇíÂèØËÉΩ„Å´„Åô„Çã„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ„Çπ„Çø„Ç§„É´„ÅÆToDo„Ç¢„Éó„É™">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tanu-ai.blog/tool/todo/">
    <meta property="og:image" content="https://tanu-ai.blog/tool/todo/todo-app-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="„ÇÜ„ÇãToDo„Ç¢„Éó„É™„ÅÆ„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà">
    <link rel="canonical" href="https://tanu-ai.blog/tool/todo/">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Handlee&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        body {
            font-family: 'Orbitron', sans-serif;
            background-color: #0a0a0a;
            color: #00ff00;
            -webkit-text-size-adjust: 100%;
        }
        .cyber-glow {
            text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
        }
        .cyber-input {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
            font-size: 14px; 
        }
        .cyber-button {
            background-color: rgba(0, 255, 0, 0.2);
            border: 1px solid #00ff00;
            color: #00ff00;
            transition: all 0.3s ease;
        }
        .cyber-button:hover {
            background-color: rgba(0, 255, 0, 0.4);
            box-shadow: 0 0 10px #00ff00;
        }
        .cyber-button:not(:disabled):hover {
            background-color: rgba(0, 255, 0, 0.4);
            box-shadow: 0 0 10px #00ff00;
        }
        .cyber-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }
        .cyber-button:focus {
            outline: none;
            box-shadow: 0 0 0 2px #00ff00, 0 0 10px #00ff00;
        }
        .cyber-list-item {
            background-color: rgba(0, 255, 0, 0.05);
            border: 1px solid rgba(0, 255, 0, 0.2);
            touch-action: pan-y;
            user-select: none;
            transition: transform 0.2s ease;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        .cyber-stats {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }
        .progress-bar {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 10px;
            background: rgba(0, 255, 0, 0.1);
            outline: none;
            transition: 0.2s;
            border-radius: 5px;
            position: relative;
            touch-action: auto;
            cursor: pointer;
        }
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: var(--progress);
            height: 100%;
            background-color: #00ff00;
            border-radius: 5px 0 0 5px;
            z-index: 1;
        }
        .progress-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #00ff00;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 5px #00ff00;
            position: relative;
            z-index: 2;
        }
        .progress-bar::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #00ff00;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 5px #00ff00;
            position: relative;
            z-index: 2;
        }
        .progress-bar:disabled {
            opacity: 0.5;
        }
        .progress-bar:disabled::-webkit-slider-thumb {
            display: none;
        }
        .progress-bar:disabled::-moz-range-thumb {
            display: none;
        }
        .progress-bar::-webkit-slider-runnable-track {
            background: transparent;
        }
        .progress-bar::-moz-range-track {
        background: transparent;
    }

        .progress-bar::-moz-range-progress {
            background-color: #00ff00;
            border-radius: 5px;
        }

        .task-text {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: 3em;
            line-height: 1.5em;
        }
        .cyber-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 1.5em;
            height: 1.5em;
            border: 2px solid rgba(0, 255, 0, 0.3);
            border-radius: 50%;
            outline: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cyber-checkbox:checked {
            background-color: #00ff00;
            box-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
        }

        .cyber-checkbox:hover {
            border-color: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }
        @media (max-width: 640px) {
            body {
                font-size: 14px;
            }
            .task-text {
                max-width: none; 
                white-space: normal; 
            }
        }
        .cyber-subtitle {
            color: #00ffff;
            text-shadow: 0 0 5px #00ffff;
            letter-spacing: 2px;
        }

        .cyber-bracket {
            color: #ff00ff;
            text-shadow: 0 0 5px #ff00ff;
            margin: 0 5px;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
            }
            50% {
                box-shadow: 0 0 20px #00ff00, 0 0 30px #00ff00;
            }
            100% {
                box-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
            }
        }

        .cyber-subtitle {
            animation: pulse 2s infinite;
        }

        @keyframes taskComplete {
        0% {
            opacity: 1;
            box-shadow: 0 0 0 rgba(0, 255, 0, 0);
        }
        50% {
            opacity: 0.5;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.7);
        }
        100% {
            opacity: 1;
            box-shadow: 0 0 0 rgba(0, 255, 0, 0);
        }
        }

        .task-complete-animation {
            animation: taskComplete 0.8s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .theme-paperpen {
        background-color: #f5f5f5;
        color: #333;
        font-family: 'Handlee', cursive;
        }

        .theme-paperpen input,
        .theme-paperpen select,
        .theme-paperpen button {
        background-color: #fff;
        border: 1px solid #ccc;
        color: #333;
        transition: all 0.3s ease;
        }

        .theme-paperpen button:hover {
        background-color: #e0e0e0;
        }

        .theme-paperpen .progress-bar {
        background-color: #ddd;
        }

        .theme-paperpen .progress-bar::before {
        background-color: #4CAF50;
        }

        .theme-paperpen .cyber-stats {
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .theme-paperpen .cyber-list-item {
        background-color: #fff;
        border-left: 4px solid #ccc;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        }

        .theme-paperpen .cyber-list-item:hover {
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .theme-paperpen .cyber-button {
        background-color: #f0f0f0;
        color: #333;
        border: 1px solid #ccc;
        transition: all 0.3s ease;
        }

        .theme-paperpen .cyber-button:hover {
        background-color: #e0e0e0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .theme-paperpen .cyber-input {
        background-color: #fff;
        border: 1px solid #ccc;
        color: #333;
        }

        .theme-paperpen .cyber-checkbox {
        border-color: #ccc;
        }

        .theme-paperpen .cyber-checkbox:checked {
        background-color: #4CAF50;
        border-color: #4CAF50;
        }

        input[type="text"], input[type="number"], textarea, select {
            font-size: 16px;
        }
        
        .no-zoom {
            touch-action: manipulation;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ÂØæÂøú */
        @media (min-width: 640px) {
            .cyber-input {
                font-size: 16px; /* sm:text-sm„Å´Áõ∏ÂΩì */
            }
        }

        /* ÂøÖË¶Å„Å´Âøú„Åò„Å¶„ÄÅ„Åï„Çâ„Å´ÂÖ∑‰ΩìÁöÑ„Å™„Çª„É¨„ÇØ„Çø„Çí‰ΩøÁî® */
        .cyber-input.w-12, .cyber-input.w-16 {
            font-size: 12px; /* „Åï„Çâ„Å´Â∞è„Åï„ÅÑ„Çµ„Ç§„Ç∫„ÅåÂøÖË¶Å„Å™Â†¥Âêà */
        }

        @media (min-width: 640px) {
            .cyber-input.w-12, .cyber-input.w-16 {
                font-size: 14px;
            }
        }

        /* „Éâ„É©„ÉÉ„Ç∞‰∏≠„ÅÆ„Çπ„Çø„Ç§„É´ 
        .cyber-list-item:active {
            opacity: 0.6;

        }*/

        .cyber-list-item.dragging {
            opacity: 0.7;
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }

        .cyber-list-item.drag-over {
            transform: translateY(5px);
        }

        .drag-handle {
            cursor: grab;
            padding: 8px;
            margin: -8px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        .drag-handle:hover {
            background-color: rgba(0, 255, 0, 0.2);
        }
        .drag-handle:active {
            cursor: grabbing;
            background-color: rgba(0, 255, 0, 0.4);
        }

    </style>
</head>
<body class="min-h-screen text-base sm:text-lg">
    <div id="root"></div>
    <script type="text/babel">
    /**
     * „ÇÜ„ÇãToDo - „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ„Çπ„Çø„Ç§„É´„ÅÆ„Çø„Çπ„ÇØÁÆ°ÁêÜ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥
     * 
     * @version 2.0.0
     * @author „Åü„Å¨
     * @coauthor Claude 3.5
     * @lastModified 2024-07-03
     */

    // React Hooks„ÅÆ„Ç§„É≥„Éù„Éº„Éà
    const { useState, useEffect, useRef, useCallback, useMemo } = React;

    /**
     * „Çπ„Éû„Éº„Éà„Éï„Ç©„É≥ÁîªÈù¢Áî®„ÅÆ„Çπ„ÇØ„É≠„Éº„É´„Ç¨„Ç§„Éâ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     * @param {string} props.theme - ÁèæÂú®„ÅÆ„ÉÜ„Éº„Éû
     */
    const AnimatedScrollGuide = ({ theme }) => {
        const [visible, setVisible] = useState(true);

        useEffect(() => {
            const timer = setTimeout(() => {
                setVisible(false);
            }, 5000);

            return () => clearTimeout(timer);
        }, []);

        if (!visible) return null;

        return (
            <div className={`flex items-center px-2 py-1 rounded-l-md animate-pulse ${
                theme === 'cyberpunk'
                    ? 'bg-yellow-500 bg-opacity-70 text-black'
                    : 'bg-blue-100 text-blue-800'
            }`}>
                <span className="mr-1">&gt;&gt;</span>
                <span className="text-xs whitespace-nowrap">„Çπ„ÇØ„É≠„Éº„É´</span>
            </div>
        );
    };

    /**
     * „Ç¢„É©„Éº„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫„Åô„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     * @param {string} props.message - Ë°®Á§∫„Åô„Çã„É°„ÉÉ„Çª„Éº„Ç∏
     * @param {boolean} props.isVisible - „Ç¢„É©„Éº„Éà„ÅÆË°®Á§∫/ÈùûË°®Á§∫
     * @param {Function} props.onClose - „Ç¢„É©„Éº„Éà„ÇíÈñâ„Åò„ÇãÈñ¢Êï∞
     */
    const CyberAlert = ({ message, isVisible, onClose }) => {
        if (!isVisible) return null;

        return (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-gray-900 border-2 border-green-500 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <p className="text-green-500 mb-4">{message}</p>
                    <div className="flex justify-end">
                        <button
                            onClick={onClose}
                            className="bg-green-500 hover:bg-green-600 text-black px-4 py-2 rounded transition duration-300 ease-in-out transform hover:scale-105"
                        >
                            OK
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    /**
     * „Ç´„Çπ„Çø„É†ÂÖ•Âäõ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const Input = ({ className, value, onChange, type = "text", ...props }) => {
        const [internalValue, setInternalValue] = useState(String(value));

        useEffect(() => {
            setInternalValue(value === '0' || value === 0 ? '' : String(value));
        }, [value]);

        const handleChange = (e) => {
            let newValue = e.target.value;
            
            if (type === "number") {
                newValue = newValue.replace(/[^\d.]/g, '');
                newValue = newValue.replace(/^0+(?=\d)/, '');
                const parts = newValue.split('.');
                if (parts.length > 2) {
                    newValue = parts[0] + '.' + parts.slice(1).join('');
                }
            }

            setInternalValue(newValue);
            onChange({ target: { value: type === "number" ? (newValue || '0') : newValue } });
        };

        const handleFocus = () => {
            if (type === "number" && internalValue === '0') {
                setInternalValue('');
            }
        };

        const handleBlur = () => {
            if (type === "number") {
                if (internalValue === '' || internalValue === '0') {
                    setInternalValue('0');
                    onChange({ target: { value: '0' } });
                } else {
                    let finalValue = String(internalValue).replace(/\.$/, '');
                    setInternalValue(finalValue);
                    onChange({ target: { value: finalValue } });
                }
            }
        };

        return (
            <input
                type={type === "number" ? "text" : type}
                inputMode={type === "number" ? "decimal" : "text"}
                className={`no-zoom cyber-input rounded px-2 py-1 ${className}`}
                value={internalValue}
                onChange={handleChange}
                onFocus={handleFocus}
                onBlur={handleBlur}
                {...props}
            />
        );
    };

    /**
     * „Ç´„Çπ„Çø„É†„Éú„Çø„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const Button = ({ className, children, disabled, ...props }) => (
        <button 
            className={`cyber-button px-3 py-1 rounded ${className} ${
                disabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-green-600 hover:shadow-lg'
            }`}
            disabled={disabled}
            {...props}
        >
            {children}
        </button>
    );

    /**
     * „Ç´„Çπ„Çø„É†„Çª„É¨„ÇØ„Éà„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const Select = ({ value, onValueChange, children }) => (
        <select 
            value={value} 
            onChange={(e) => onValueChange(e.target.value)} 
            className="cyber-input rounded px-2 py-1"
        >
            {children}
        </select>
    );

    /**
     * „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const ProgressBar = ({ value, onChange, disabled }) => (
        <div className="flex items-center space-x-2">
            <input
                type="range"
                min="0"
                max="100"
                value={value}
                onChange={onChange}
                disabled={disabled}
                className="no-zoom progress-bar"
                style={{ "--progress": `${value}%` }}
            />
            <span className="text-sm">{value}%</span>
        </div>
    );

    /**
     * „Éà„Ç∞„É´„Éú„Çø„É≥„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const ToggleButton = ({ isOn, onToggle, onLabel, offLabel, theme }) => {
        const buttonClasses = theme === 'cyberpunk'
            ? `cyber-button ${isOn ? 'bg-green-600' : 'bg-gray-600'} text-green-200`
            : `${isOn ? 'bg-blue-100 text-blue-800' : 'bg-gray-200 text-gray-800'}`;

        return (
            <button
                onClick={onToggle}
                className={`inline-flex items-center space-x-2 px-3 py-2 rounded text-sm sm:text-base shadow-md hover:shadow-lg transition-shadow duration-300 ${buttonClasses} whitespace-nowrap`}
            >
                <span className="mr-2">{isOn ? '‚úì' : '‚úó'}</span>
                <span>{isOn ? onLabel : offLabel}</span>
            </button>
        );
    };

    /**
     * ÂãïÁöÑ„Éò„ÉÉ„ÉÄ„Éº„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     */
    const DynamicHeader = () => {
        const [message, setMessage] = useState('');
        const [showSubtitle, setShowSubtitle] = useState(false);
        const [currentTime, setCurrentTime] = useState('');
        const [currentDate, setCurrentDate] = useState('');

        useEffect(() => {
            const updateDateTime = () => {
                const now = new Date();
                setCurrentDate(now.toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }));
                setCurrentTime(now.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' }));
            };

            updateDateTime();
            const timer = setInterval(updateDateTime, 1000);

            const hour = new Date().getHours();
            let timeMessage = '';

            if (hour >= 5 && hour < 12) {
                timeMessage = '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ';
            } else if (hour >= 12 && hour < 18) {
                timeMessage = '„Åì„Çì„Å´„Å°„ÅØÔºÅ';
            } else {
                timeMessage = '„Åì„Çì„Å∞„Çì„ÅØÔºÅ';
            }

            setTimeout(() => {
                setMessage(timeMessage);
            }, 1000);

            setTimeout(() => {
                setShowSubtitle(true);
            }, 2000);

            setTimeout(() => {
                setMessage('');
            }, 3000);

            return () => {
                clearInterval(timer);
            };
        }, []);

        return (
            <div className="text-center mb-6">
                <h1 className="text-2xl sm:text-3xl font-bold cyber-glow mb-2">„ÇÜ„ÇãToDo</h1>
                <p className="text-sm sm:text-base cyber-subtitle h-6 mb-1">
                    {currentDate} {currentTime}
                </p>
                <p className="text-xs sm:text-sm mt-2 cyber-subtitle h-6">
                    {message && 
                        <span>
                            <span className="cyber-bracket">[</span>
                            {message}
                            <span className="cyber-bracket">]</span>
                        </span>
                    }
                    {showSubtitle && (message ? ' ' : '')}
                    {showSubtitle && 
                        <span>
                            <span className="cyber-bracket">[</span>
                            „Åô„Çã„Åì„Å®„Éª„Åó„Å™„ÅÑ„Åì„Å®„ÇÇÁÆ°ÁêÜ
                            <span className="cyber-bracket">]</span>
                        </span>
                    }
                </p>
            </div>
        );
    };

    /**
     * „Çø„Éñ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     * @param {Object} props - „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£
     */
    const Tabs = ({ tabs, activeTab, onTabChange }) => {
        return (
            <div className="flex mb-4 border-b border-green-500">
                {tabs.map((tab) => (
                    <button
                        key={tab}
                        className={`py-2 px-4 mr-2 ${
                            activeTab === tab
                                ? 'bg-green-500 text-black'
                                : 'bg-transparent text-green-500'
                        } hover:bg-green-600 hover:text-black transition-colors`}
                        onClick={() => onTabChange(tab)}
                    >
                        {tab}
                    </button>
                ))}
            </div>
        );
    };

    /**
     * „É°„Ç§„É≥„ÅÆTodo„Ç¢„Éó„É™„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
     */
    const TodoApp = () => {
        // Áä∂ÊÖãÂ§âÊï∞„ÅÆÂÆöÁæ©
        const [todos, setTodos] = useState([]);
        const [newTodo, setNewTodo] = useState('');
        const [newEstimate, setNewEstimate] = useState('');
        const [newPriority, setNewPriority] = useState('‰∏≠');
        const [newIsNegative, setNewIsNegative] = useState(false);
        const [alertMessage, setAlertMessage] = useState('');
        const [isAlertVisible, setIsAlertVisible] = useState(false);
        const [priorityFilter, setPriorityFilter] = useState('all');
        const [editingTaskId, setEditingTaskId] = useState(null);
        const [completedTaskId, setCompletedTaskId] = useState(null);
        const [isDeleteConfirmVisible, setIsDeleteConfirmVisible] = useState(false);
        const [showCompletedTasks, setShowCompletedTasks] = useState(true);
        const [countAllTasks, setCountAllTasks] = useState(true);
        const [isMobile, setIsMobile] = useState(false);
        const fileInputRef = useRef(null);
        const [tabs, setTabs] = useState(['„É°„Ç§„É≥', '‰ªï‰∫ã', 'Ë∂£Âë≥']);
        const [activeTab, setActiveTab] = useState('„É°„Ç§„É≥');
        const [todosPerTab, setTodosPerTab] = useState({
            „É°„Ç§„É≥: [],
            ‰ªï‰∫ã: [],
            Ë∂£Âë≥: [],
        });

        // Âä±„Åæ„Åó„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Çí„Å§„Åè„Çã
        const getEncouragementMessage = (totalProgress, completedProgress) => {
            if (totalProgress === 100) return "Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅÂÖ®„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ";
            if (completedProgress >= 75) return "„ÅÇ„Å®Â∞ë„ÅóÔºÅ„Åå„Çì„Å∞„Å£„Å¶ÔºÅ";
            if (completedProgress >= 50) return "ÂçäÂàÜ‰ª•‰∏äÂÆå‰∫ÜÔºÅ„Åù„ÅÆË™øÂ≠êÔºÅ";
            if (completedProgress >= 25) return "ËâØ„ÅÑÈÄ≤Êçó„Åß„Åô„ÄÇÁ∂ö„Åë„Åæ„Åó„Çá„ÅÜÔºÅ";
            return "‰∏ÄÊ≠©„Åö„Å§ÂâçÈÄ≤„Åó„Åæ„Åó„Çá„ÅÜÔºÅ";
        };

        // „Çø„Çπ„ÇØ‰∏¶„Å≥Êõø„ÅàÊ©üËÉΩ
        const [isDragging, setIsDragging] = useState(false);
        const dragStartY = useRef(null);
        const draggedItem = useRef(null);
        const dragThreshold = 5000; // „Éî„ÇØ„Çª„É´Âçò‰Ωç„ÅÆ„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã„Åó„Åç„ÅÑÂÄ§
        const [draggedOverId, setDraggedOverId] = useState(null);
        const [isDraggingHandle, setIsDraggingHandle] = useState(false);
        const [draggedItemId, setDraggedItemId] = useState(null);

        const handleDragStart = (e, id) => {
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', id);
            setIsDragging(true);
            setDraggedItemId(id);

            const draggedElement = e.target.closest('li');
            if (draggedElement) {
                draggedElement.classList.add('dragging');
            }

            // „Çø„ÉÉ„ÉÅ„Éá„Éê„Ç§„ÇπÁî®
            if (e.type === 'touchstart') {
                const touch = e.touches[0];
                dragStartY.current = touch.clientY;
            }
        };

        const handleDragEnd = () => {
            setIsDragging(false);
            setDraggedItemId(null);
        };
        
        const handleDragMove = (e) => {
            if (!draggedItem.current) return;

            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            const deltaY = clientY - dragStartY.current;

            if (Math.abs(deltaY) > dragThreshold && !isDragging) {
                setIsDragging(true);
                if (e.dataTransfer) {
                e.dataTransfer.setData('text/plain', draggedItem.current.toString());
                }
            }
        };


        const handleDragOver = (e, id) => {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            setDraggedOverId(id);
        };

        const handleDrop = (e, targetId) => {
            e.preventDefault();
            setIsDragging(false);
            setDraggedOverId(null);

            const draggedId = parseInt(e.dataTransfer ? e.dataTransfer.getData('text/plain') : draggedItem.current);
            if (draggedId !== targetId) {
                const newTodos = [...todosPerTab[activeTab]];
                const draggedIndex = newTodos.findIndex(todo => todo.id === draggedId);
                const targetIndex = newTodos.findIndex(todo => todo.id === targetId);
                
                const [removed] = newTodos.splice(draggedIndex, 1);
                newTodos.splice(targetIndex, 0, removed);
                
                setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: newTodos
                }));
            }
            
            draggedItem.current = null;
        };

        const handleTouchMove = (e) => {
            if (!draggedItem.current) return;

            const touch = e.touches[0];
            const currentY = touch.clientY;
            const deltaY = currentY - dragStartY.current;

            if (Math.abs(deltaY) > 5) { // 5px„ÅÆÈñæÂÄ§„ÇíË®≠ÂÆö
                const draggedElement = document.elementFromPoint(touch.clientX, currentY);
                const targetItem = draggedElement && draggedElement.closest('li');
                if (targetItem && targetItem.dataset.id !== draggedItem.current) {
                    handleDrop(e, parseInt(targetItem.dataset.id));
                }
                dragStartY.current = currentY;
            }
        };

        // „ÉÜ„Ç≠„Çπ„ÉàÈÅ∏Êäû„ÇíÈò≤Ê≠¢Ôºà„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó„Åô„Çã„Åü„ÇÅÔºâ
        const preventDefaultTouchMove = (e) => {
            e.preventDefault();
        };

        const handleTouchStart = (e, id) => {
            e.preventDefault(); // „ÉÜ„Ç≠„Çπ„ÉàÈÅ∏Êäû„ÇíÈò≤„Åê
            handleDragStart(e, id);
            document.addEventListener('touchmove', preventDefaultTouchMove, { passive: false });
            setIsDragging(true);
            setDraggedItemId(id);
        };

        const handleTouchEnd = () => {
            draggedItem.current = null;
            setIsDraggingHandle(false);
            setDraggedOverId(null);
            document.removeEventListener('touchmove', preventDefaultTouchMove);
            setIsDragging(false);
            setDraggedItemId(null);
        };
                        
        // „Çµ„Ç∏„Çß„Çπ„ÉàÊ©üËÉΩ
        const [suggestions, setSuggestions] = useState([]);
        const [selectedSuggestion, setSelectedSuggestion] = useState(-1);
        // „Çµ„Ç∏„Çß„Çπ„ÉàÊ©üËÉΩÔºà„Éï„Ç©„Éº„Ç´„Çπ„ÅåÂ§ñ„Çå„ÅüÈöõ„ÅÆÊåôÂãïÔºâ
        const inputRef = useRef(null);
        const suggestionsRef = useRef(null);

        const generateSuggestions = (input) => {
            if (input.length < 2) return [];

            const allTasks = Object.values(todosPerTab).flat();
            return allTasks
                .map(todo => todo.text)
                .filter((text, index, self) => 
                    text.toLowerCase().includes(input.toLowerCase()) && self.indexOf(text) === index
                )
                .slice(0, 5);
        };

        const handleInputBlur = () => {
            setTimeout(() => {
                setSuggestions([]);
            }, 200);
        };

        useEffect(() => {
            function handleClickOutside(event) {
                if (inputRef.current && !inputRef.current.contains(event.target) &&
                    suggestionsRef.current && !suggestionsRef.current.contains(event.target)) {
                    setSuggestions([]);
                }
            }

            document.addEventListener("mousedown", handleClickOutside);
            return () => {
                document.removeEventListener("mousedown", handleClickOutside);
            };
        }, []);

        const handleInputChange = (e) => {
            const newValue = e.target.value;
            setNewTodo(newValue);
            setSuggestions(generateSuggestions(newValue));
            setSelectedSuggestion(-1);
        };

        const handleKeyDown = (e) => {
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                setSelectedSuggestion(prev => (prev < suggestions.length - 1 ? prev + 1 : prev));
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                setSelectedSuggestion(prev => (prev > 0 ? prev - 1 : -1));
            } else if (e.key === 'Enter' && selectedSuggestion !== -1) {
                e.preventDefault();
                setNewTodo(suggestions[selectedSuggestion]);
                setSuggestions([]);
            }
        };

        const SuggestionList = React.forwardRef(({ suggestions, selectedIndex, onSelect }, ref) => (
            <ul ref={ref} className="absolute z-10 bg-gray-800 border border-green-500 rounded mt-1 w-full">
                {suggestions.map((suggestion, index) => (
                    <li
                        key={index}
                        className={`px-2 py-1 cursor-pointer ${index=== selectedIndex ? 'bg-green-700' : 'hover:bg-green-900'}`}
                        onClick={() => onSelect(suggestion)}
                    >
                        {suggestion}
                    </li>
                ))}
            </ul>
        ));

        // Êó•Êú¨Ë™ûÂÖ•Âäõ‰∏≠„ÅÆ„Éê„Ç∞‰øÆÊ≠£
        const [isComposing, setIsComposing] = useState(false);
        const [originalText, setOriginalText] = useState('');
        const [composingStates, setComposingStates] = useState({});
        const [editingValues, setEditingValues] = useState({});

        // „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà„ÅÆ„Åü„ÇÅ„ÅÆÁä∂ÊÖãÂ§âÊï∞
        const [currentTheme, setCurrentTheme] = useState(() => {
            const savedTheme = localStorage.getItem('todoAppTheme');
            return savedTheme || 'cyberpunk';
        });

        // „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„ÅàÈñ¢Êï∞
        const toggleTheme = () => {
            const newTheme = currentTheme === 'cyberpunk' ? 'paperpen' : 'cyberpunk';
            setCurrentTheme(newTheme);
            localStorage.setItem('todoAppTheme', newTheme);
        };

        // „ÉÜ„Éº„Éû„Å´Âü∫„Å•„Åè„Çπ„Çø„Ç§„É´
        const getThemeStyles = () => {
            if (currentTheme === 'cyberpunk') {
                return {
                    backgroundColor: '#0a0a0a',
                    color: '#00ff00',
                    fontFamily: "'Orbitron', sans-serif",
                };
            } else {
                return {
                    backgroundColor: '#f0f0f0',
                    color: '#333',
                    fontFamily: "'Handlee', cursive",
                };
            }
        };

        // „ÉÜ„Éº„Éû„Å´Âü∫„Å•„Åè„ÇØ„É©„ÇπÂêç
        const getThemeClasses = (cyberpunkClass, paperpenClass) => {
            return currentTheme === 'cyberpunk' ? cyberpunkClass : paperpenClass;
        };

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´Áî®„ÅÆÁä∂ÊÖãÂ§âÊï∞
        const [showTutorial, setShowTutorial] = useState(false);
        const [tutorialStep, setTutorialStep] = useState(0);
        const [isLoading, setIsLoading] = useState(true);

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó
        const tutorialSteps = [
            {
                title: "„ÇÜ„ÇãToDo„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ",
                content: "„Åì„ÅÆ„Ç¢„Éó„É™„Åß„ÅØ„Çø„Çπ„ÇØ„ÅÆÁÆ°ÁêÜ„Å®ÈÄ≤Êçó„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„ÅåÁ∞°Âçò„Å´„Åß„Åç„Åæ„Åô„ÄÇ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÇíÈÄ≤„ÇÅ„Å¶Âü∫Êú¨Ê©üËÉΩ„ÇíÂ≠¶„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ",
            },
            {
                title: "„Çø„Çπ„ÇØ„ÅÆËøΩÂä†",
                content: "Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä†„Åô„Çã„Å´„ÅØ„ÄÅ‰∏äÈÉ®„ÅÆÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ„Å´„Çø„Çπ„ÇØÂêç„ÇíÂÖ•Âäõ„Åó„ÄÅ‰∫àÂÆöÊôÇÈñì„ÇíË®≠ÂÆö„Åó„Å¶„ÄåÔºã ËøΩÂä†„Äç„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ",
            },
            {
                title: "ÂÑ™ÂÖàÂ∫¶„ÅÆË®≠ÂÆö",
                content: "„Çø„Çπ„ÇØ„ÅÆÈáçË¶ÅÂ∫¶„Å´Âøú„Åò„Å¶„ÄÅ„ÄåÈ´ò„Äç„Äå‰∏≠„Äç„Äå‰Ωé„Äç„ÅÆÂÑ™ÂÖàÂ∫¶„ÇíË®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇ",
            },
            {
                title: "„Äå„Åô„Çã„Äç„Äå„Åó„Å™„ÅÑ„Äç„ÅÆÂàá„ÇäÊõø„Åà",
                content: "„Çø„Çπ„ÇØ„Çí„Äå„Åó„Å™„ÅÑ„Äç„Å´Ë®≠ÂÆö„Åô„Çã„Å®„ÄÅËá™ÂãïÁöÑ„Å´ÂÆå‰∫ÜÊâ±„ÅÑ„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Çø„Çπ„ÇØ„ÅÆÂÜÖÂÆπÂê´„ÇÅ„Å¶„ÄÅ„Åì„Çå„ÅØÂæå„ÅßÂ§âÊõ¥ÂèØËÉΩ„Åß„Åô„ÄÇ",
            },
            {
                title: "ÈÄ≤Êçó„ÅÆÊõ¥Êñ∞",
                content: "ÂêÑ„Çø„Çπ„ÇØ„Å´„ÅØ„Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Åå„ÅÇ„Çä„ÄÅ0%„Åã„Çâ100%„Åæ„ÅßÈÄ≤Êçó„ÇíÊõ¥Êñ∞„Åß„Åç„Åæ„Åô„ÄÇ100%„Å´Âà∞ÈÅî„Åô„Çã„Å®Ëá™ÂãïÁöÑ„Å´ÂÆå‰∫ÜÊâ±„ÅÑ„Å´„Å™„Çä„Åæ„Åô„ÄÇ",
            },
            {
                title: "„Éï„Ç£„É´„Çø„Éº„Éª‰∏¶„Å≥Êõø„ÅàÊ©üËÉΩ",
                content: "ÂÑ™ÂÖàÂ∫¶„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Åó„Åü„Çä„ÄÅÂÆå‰∫ÜÊ∏à„Åø„Çø„Çπ„ÇØ„ÅÆË°®Á§∫/ÈùûË°®Á§∫„ÇíÂàá„ÇäÊõø„Åà„Çâ„Çå„Åæ„Åô„ÄÇÂêÑ„Çø„Çπ„ÇØ„ÅØ„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó„Åß„ÇÇ‰∏¶„Å≥Êõø„Åà„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            },
            {
                title: "„Éá„Éº„Çø„ÅÆ‰øùÂ≠ò„Å®„É≠„Éº„Éâ",
                content: "ÂÖ•Âäõ„Åï„Çå„ÅüÈ†ÖÁõÆ„ÅØ„ÄÅ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´Ëá™Âãï‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åª„Åã„Äåüíæ „Çª„Éº„Éñ„Äç„Éú„Çø„É≥„Åß„Éá„Éº„Çø„ÇíJSON„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶Â§ñÈÉ®„Å´‰øùÂ≠ò„Åó„ÄÅ„ÄåüîÉ „É≠„Éº„Éâ„Äç„Éú„Çø„É≥„ÅßÂæ©ÂÖÉ„Åß„Åç„Åæ„Åô„ÄÇ",
            },
            {
                title: "„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´ÂÆå‰∫ÜÔºÅ",
                content: "Âü∫Êú¨Ê©üËÉΩ„Çí‰∏ÄÈÄö„ÇäÂ≠¶„Å≥„Åæ„Åó„Åü„ÄÇ„Åï„Å£„Åù„Åè„Çø„Çπ„ÇØÁÆ°ÁêÜ„ÇíÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜÔºÅ‚Äª„Åì„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅØ‰∏ãÈÉ®„ÅÆ„ÄåÂÜçË°®Á§∫„Äç„Éú„Çø„É≥„Åã„ÇâÂÜçÂ∫¶Á¢∫Ë™ç„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
            },
        ];

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆË°®Á§∫Âà∂Âæ°
        useEffect(() => {
            const tutorialCompleted = localStorage.getItem('tutorialCompleted');
            if (!tutorialCompleted) {
                setShowTutorial(true);
            }
            setIsLoading(false);
        }, []);

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆÊ¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„Å∏
        const handleNextTutorialStep = () => {
            if (tutorialStep < tutorialSteps.length - 1) {
                setTutorialStep(tutorialStep + 1);
            } else {
                handleCompleteTutorial();
            }
        };

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆÂÆå‰∫Ü
        const handleCompleteTutorial = () => {
            localStorage.setItem('tutorialCompleted', 'true');
            setShowTutorial(false);
        };

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅÆÂÜçÈñã
        const restartTutorial = () => {
            localStorage.removeItem('tutorialCompleted');
            setShowTutorial(true);
            setTutorialStep(0);
        };

        // „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        const TutorialComponent = () => (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-gray-900 border-2 border-green-500 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 relative">
                    <button onClick={handleCompleteTutorial} className="absolute top-2 right-2 text-green-500 hover:text-green-400">
                        ‚úï
                    </button>
                    <h2 className="text-green-500 text-xl mb-4">{tutorialSteps[tutorialStep].title}</h2>
                    <p className="text-green-400 mb-4">{tutorialSteps[tutorialStep].content}</p>
                    <div className="flex justify-between items-center">
                        <span className="text-green-500">
                            {tutorialStep + 1} / {tutorialSteps.length}
                        </span>
                        <button
                            onClick={handleNextTutorialStep}
                            className="bg-green-500 hover:bg-green-600 text-black px-4 py-2 rounded transition duration-300 ease-in-out transform hover:scale-105"
                        >
                            {tutorialStep < tutorialSteps.length - 1 ? 'Ê¨°„Å∏' : 'ÂÆå‰∫Ü'}
                        </button>
                    </div>
                </div>
            </div>
        );
        
        // Êóß„Éï„Ç©„Éº„Éû„ÉÉ„ÉàjsonÊ§úÂá∫Áî®
        const [isLegacyImportDialogVisible, setIsLegacyImportDialogVisible] = useState(false);
        const [legacyImportData, setLegacyImportData] = useState(null);
        const [showConversionButton, setShowConversionButton] = useState(false);

        // „Çø„ÉñÂ§âÊõ¥„Éè„É≥„Éâ„É©„Éº
        const handleTabChange = (tab) => {
            setActiveTab(tab);
        };

        // ÊôÇÈñìË°®Á§∫„ÇíÁµ±‰∏Ä„Åô„Çã„Åü„ÇÅ„ÅÆ„Éò„É´„Éë„ÉºÈñ¢Êï∞
        const formatTime = (time) => {
            const numTime = parseFloat(time);
            if (numTime >= 1000) {
                return '999+';
            }
            return numTime.toFixed(1).replace(/\.0$/, '');
        };

        // „Çø„Çπ„ÇØÊï∞Ë°®Á§∫Áî®„ÅÆÈñ¢Êï∞
        const formatCount = (count) => {
            return count >= 1000 ? '999+' : count.toString();
        };

        // „Çø„Çπ„ÇØÊìç‰ΩúÈñ¢Êï∞
        const updateTaskText = (id, newText) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].map(todo =>
                    todo.id === id ? { ...todo, text: newText.trim() || todo.text } : todo
                )
            }));
            setEditingValues(prev => ({ ...prev, [id]: newText }));
        };

        const toggleCompletedTasks = () => {
            setShowCompletedTasks(!showCompletedTasks);
        };

        const toggleCountAllTasks = () => {
            setCountAllTasks(!countAllTasks);
        };

        // „É≠„Ç∞„É°„ÉÉ„Çª„Éº„Ç∏ÁîüÊàêÈñ¢Êï∞
        const getLogMessages = () => {
            const messages = [];
            if (priorityFilter !== 'all') {
                messages.push(`ÂÑ™ÂÖàÂ∫¶„Äå${priorityFilter}„Äç„ÅÆ„Çø„Çπ„ÇØ„ÅÆ„ÅøË°®Á§∫‰∏≠`);
            }
            if (!showCompletedTasks) {
                messages.push('ÂÆå‰∫ÜÊ∏à„Çø„Çπ„ÇØ„ÅØÈùûË°®Á§∫');
            }
            if (countAllTasks) {
                messages.push('ÈùûË°®Á§∫„ÅÆ„Çø„Çπ„ÇØ„ÇÇ„Ç´„Ç¶„É≥„Éà„Å´Âê´„ÇÄ');
            }
            return messages;
        };

        // Êóßjson„Åã„Çâ„ÅÆÁßªË°å„Éó„É≠„Ç∞„É©„É†
        useEffect(() => {
            migrateLocalStorageData();
        }, []);

        const migrateLocalStorageData = () => {
            const oldData = localStorage.getItem('todos');
            const newData = localStorage.getItem('todosPerTab');

            if (oldData && !newData) {
                try {
                    const parsedOldData = JSON.parse(oldData);
                    if (Array.isArray(parsedOldData)) {
                        // Âè§„ÅÑ„Éá„Éº„ÇøÂΩ¢Âºè„ÇíÊñ∞„Åó„ÅÑÂΩ¢Âºè„Å´Â§âÊèõ
                        const migratedData = {
                            „É°„Ç§„É≥: parsedOldData,
                            ‰ªï‰∫ã: [],
                            Ë∂£Âë≥: []
                        };
                        localStorage.setItem('todosPerTab', JSON.stringify(migratedData));
                        setTodosPerTab(migratedData);
                        setAlertMessage('Êóß„Éê„Éº„Ç∏„Éß„É≥„ÅÆ„Éá„Éº„Çø„ÇíÊñ∞„Åó„ÅÑÂΩ¢Âºè„Å´Â§âÊèõ„Åó„Åæ„Åó„Åü„ÄÇÂÖ®„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÅØ„Äå„É°„Ç§„É≥„Äç„Çø„Éñ„Å´ÈÖçÁΩÆ„Åï„Çå„Åæ„Åó„Åü„ÄÇ');
                        setIsAlertVisible(true);
                    }
                } catch (error) {
                    console.error('„Éá„Éº„Çø„ÅÆÁßªË°å‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü:', error);
                    setAlertMessage('Êóß„Éá„Éº„Çø„ÅÆÂ§âÊèõ‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ„ÄÇ„Åä„Åù„Çâ„ÅèÊ∂à„Åà„Å¶„Åó„Åæ„Å£„Åü„Çà„ÅÜ„Åß„Åô„ÄÇ');
                    setIsAlertVisible(true);
                }
            } else if (newData) {
                // Êñ∞„Åó„ÅÑ„Éá„Éº„ÇøÂΩ¢Âºè„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åù„Çå„Çí‰ΩøÁî®
                setTodosPerTab(JSON.parse(newData));
            }
        };

        // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏Êñ∞Êóß„Ç≥„É≥„Éê„Éº„Éà„ÄÅÊâãÂãïÂÆüË°åÁî®ÔºàÁ∑äÊÄ•Ôºâ
        useEffect(() => {
            const oldData = localStorage.getItem('todos');
            const newData = localStorage.getItem('todosPerTab');
            setShowConversionButton(!!oldData && !newData);
        }, []);

        const convertData = () => {
            const oldData = localStorage.getItem('todos');
            if (oldData) {
                try {
                    const parsedOldData = JSON.parse(oldData);
                    if (Array.isArray(parsedOldData)) {
                        const migratedData = {
                            „É°„Ç§„É≥: parsedOldData,
                            ‰ªï‰∫ã: [],
                            Ë∂£Âë≥: []
                        };
                        localStorage.setItem('todosPerTab', JSON.stringify(migratedData));
                        localStorage.removeItem('todos'); // Âè§„ÅÑ„Éá„Éº„Çø„ÇíÂâäÈô§
                        setAlertMessage('„Éá„Éº„Çø„ÅÆÂ§âÊèõ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ„Éö„Éº„Ç∏„Çí„É™„É≠„Éº„Éâ„Åó„Åæ„Åô„ÄÇ');
                        setIsAlertVisible(true);
                        setTimeout(() => {
                            window.location.reload();
                        }, 3000); // 3ÁßíÂæå„Å´„É™„É≠„Éº„Éâ
                    }
                } catch (error) {
                    console.error('„Éá„Éº„Çø„ÅÆÂ§âÊèõ‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü:', error);
                    setAlertMessage('„Éá„Éº„Çø„ÅÆÂ§âÊèõ‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ„ÄÇ„Åä„Åù„Çâ„ÅèÊ∂à„Åà„Å¶„Åó„Åæ„Å£„Åü„Çà„ÅÜ„Åß„Åô„ÄÇ');
                    setIsAlertVisible(true);
                }
            } else {
                setAlertMessage('Â§âÊèõ„Åô„Çã„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ');
                setIsAlertVisible(true);
            }
        };

        // „Éê„Éº„Ç∏„Éß„É≥ÊÉÖÂ†±„ÉªÂ±•Ê≠¥
        const appVersion = "2.0.0";
        const updateHistory = [
            { version: "2.00", description: "‰∏¶„Å≥Êõø„ÅàÊ©üËÉΩ„ÅÆÊîπÂñÑ„ÉªÊó•‰ªòË°®Á§∫„ÅÆËøΩÂä†" },
            { version: "1.90", description: "‰∏¶„Å≥Êõø„ÅàÊ©üËÉΩ„ÅÆËøΩÂä†" },
            { version: "1.90", description: "„É≠„Éº„ÉâÊôÇ„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÇíÂé≥Ê†ºÂåñ" },
            { version: "1.80", description: "„Çµ„Ç∏„Çß„Çπ„ÉàÊ©üËÉΩ„ÅÆËøΩÂä†" },
            { version: "1.71", description: "„ÉÜ„Éº„ÉûÂàá„ÇäÊõø„ÅàÊ©üËÉΩ„ÅÆËøΩÂä†ÔºàŒ≤Ôºâ" },
            { version: "1.70", description: "„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´ËøΩÂä†" },
            { version: "1.60", description: "„Çø„ÉñÊ©üËÉΩ„ÅÆËøΩÂä†ÔºàŒ≤Ôºâ" },
        ];

        // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø
        useEffect(() => {
            const storedTodos = localStorage.getItem('todosPerTab');
            if (storedTodos) {
                setTodosPerTab(JSON.parse(storedTodos));
            } else {
                migrateLocalStorageData(); // „Éá„Éº„Çø„Åå„Å™„ÅÑÂ†¥Âêà„ÄÅÁßªË°å„ÇíË©¶„Åø„Çã
            }
        }, []);

        // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å∏„ÅÆ‰øùÂ≠ò
        useEffect(() => {
            localStorage.setItem('todosPerTab', JSON.stringify(todosPerTab));
        }, [todosPerTab]);

        useEffect(() => {
            const checkIfMobile = () => {
                setIsMobile(window.innerWidth < 640); // sm breakpoint
            };

            checkIfMobile();
            window.addEventListener('resize', checkIfMobile);

            return () => window.removeEventListener('resize', checkIfMobile);
        }, []);

        // „Çø„Çπ„ÇØËøΩÂä†Èñ¢Êï∞
        const addTodo = () => {
            const estimateValue = parseFloat(newEstimate);
            if (newTodo.trim() !== '' && estimateValue && estimateValue !== 0) {
                const finalEstimate = newIsNegative ? -Math.abs(estimateValue) : estimateValue;
                const newTask = { 
                    id: Date.now(), 
                    text: newTodo, 
                    completed: newIsNegative,
                    estimate: finalEstimate,
                    priority: newPriority,
                    progress: newIsNegative ? 100 : 0
                };
                setTodosPerTab(prev => ({
                    ...prev,
                    [activeTab]: [...prev[activeTab], newTask]
                }));
                setNewTodo('');
                setNewEstimate('');
                setNewPriority('‰∏≠');
                setNewIsNegative(false);
            } else {
                setAlertMessage('„Çø„Çπ„ÇØÂêç„Å®0‰ª•Â§ñ„ÅÆÊôÇÈñì„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                setIsAlertVisible(true);
            }
        };

        // „Çø„Çπ„ÇØÂàá„ÇäÊõø„ÅàÈñ¢Êï∞
        const toggleTodo = (id) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].map(todo => {
                    if (todo.id === id) {
                        if (!todo.completed && todo.estimate >= 0) {
                            setCompletedTaskId(id);
                            setTimeout(() => setCompletedTaskId(null), 800);
                            return { ...todo, completed: true, progress: 100 };
                        } else if (todo.completed && todo.estimate >= 0) {
                            return { ...todo, completed: true, estimate: -Math.abs(todo.estimate), progress: 100 };
                        } else {
                            return { ...todo, completed: false, estimate: Math.abs(todo.estimate), progress: 0 };
                        }
                    }
                    return todo;
                })
            }));
        };

        // „Çø„Çπ„ÇØÂâäÈô§Èñ¢Êï∞
        const deleteTodo = (id) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].filter(todo => todo.id !== id)
            }));
        };

        // „Çø„Çπ„ÇØ„ÅÆË¶ãÁ©ç„ÇÇ„ÇäÊôÇÈñìÊõ¥Êñ∞Èñ¢Êï∞
        const updateEstimate = (id, newEstimate) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].map(todo =>
                    todo.id === id ? { ...todo, estimate: newEstimate === '' ? 0 : parseFloat(newEstimate) } : todo
                )
            }));
        };

        // „Çø„Çπ„ÇØ„ÅÆÂÑ™ÂÖàÂ∫¶Êõ¥Êñ∞Èñ¢Êï∞
        const updatePriority = (id, newPriority) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].map(todo =>
                    todo.id === id ? { ...todo, priority: newPriority } : todo
                )
            }));
        };

        // „Çø„Çπ„ÇØ„ÅÆÈÄ≤ÊçóÊõ¥Êñ∞Èñ¢Êï∞
        const updateProgress = (id, newProgress) => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: prev[activeTab].map(todo =>
                    todo.id === id && todo.estimate >= 0 ? { ...todo, progress: newProgress, completed: newProgress === 100 } : todo
                )
            }));
        };

        // ÂÑ™ÂÖàÂ∫¶„Å´Âøú„Åò„ÅüËâ≤„ÅÆÂÆöÁæ©
        const priorityColors = {
            'È´ò': 'text-red-500',
            '‰∏≠': 'text-yellow-500',
            '‰Ωé': 'text-blue-500'
        };

        // „Çø„Çπ„ÇØÁµ±Ë®àË®àÁÆóÈñ¢Êï∞
        const getTaskCounts = () => {
            const tasksToCount = countAllTasks ? todosPerTab[activeTab] : filteredTodos;
            return {
                remaining: tasksToCount.filter(todo => !todo.completed && todo.estimate >= 0).length,
                completed: tasksToCount.filter(todo => todo.completed && todo.estimate >= 0).length,
                notDoing: tasksToCount.filter(todo => todo.estimate < 0).length
            };
        };

        // „Çø„Çπ„ÇØÊôÇÈñìË®àÁÆóÈñ¢Êï∞
        const calculateTimes = () => {
            const tasksToCount = countAllTasks ? todosPerTab[activeTab] : filteredTodos;
            
            const remaining = tasksToCount
                .filter(todo => !todo.completed && todo.estimate >= 0)
                .reduce((total, todo) => total + (parseFloat(todo.estimate) || 0), 0);

            const completed = tasksToCount
                .filter(todo => todo.completed && todo.estimate >= 0)
                .reduce((total, todo) => total + parseFloat(todo.estimate), 0);

            const notDoing = Math.abs(tasksToCount
                .filter(todo => todo.estimate < 0)
                .reduce((total, todo) => total + parseFloat(todo.estimate), 0));

            return {
                remaining: formatTime(remaining),
                completed: formatTime(completed),
                notDoing: formatTime(notDoing)
            };
        };

        /**
         * „Çø„Çπ„ÇØ„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÈñ¢Êï∞
         * „Éï„Ç°„Ç§„É´Âêç„Å´ÁèæÂú®„ÅÆÊó•ÊôÇ„ÇíÂê´„ÇÅ„ÄÅ„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÂÆå‰∫ÜÊôÇ„Å´„Éï„Ç°„Ç§„É´Âêç„ÇíË°®Á§∫„Åô„Çã
         */
         const exportTodos = () => {
            const dataStr = JSON.stringify(todosPerTab, null, 2);
            const blob = new Blob([dataStr], {type: 'application/json'});
            const exportFileName = `todos_${new Date().toISOString().slice(0,10)}.json`;

            // Safari„Éñ„É©„Ç¶„Ç∂„Åß„ÅØiOS„Å®MacOS„ÅÆ‰∏°Êñπ„ÅßÂãï‰Ωú„Åó„Åæ„Åô
            if (window.navigator.userAgent.indexOf('Safari') > -1 && window.navigator.userAgent.indexOf('Chrome') === -1) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const a = document.createElement('a');
                    a.href = e.target.result;
                    a.download = exportFileName;
                    a.textContent = "„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ: " + exportFileName;
                    a.style.display = 'none';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                };
                reader.readAsDataURL(blob);
            } else {
                // ‰ªñ„ÅÆ„Éñ„É©„Ç¶„Ç∂Áî®
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = exportFileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            setAlertMessage(`„Çø„Çπ„ÇØ„Åå "${exportFileName}" „Å®„Åó„Å¶„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åï„Çå„Åæ„Åó„Åü„ÄÇ`);
            setIsAlertVisible(true);
        };

        // „Çø„Çπ„ÇØ„Ç§„É≥„Éù„Éº„ÉàÈñ¢Êï∞
        const isValidTodoItem = (item) => {
            return (
                typeof item === 'object' &&
                item !== null &&
                typeof item.id === 'number' &&
                typeof item.text === 'string' &&
                typeof item.completed === 'boolean' &&
                typeof item.estimate === 'number' &&
                typeof item.priority === 'string' &&
                ['È´ò', '‰∏≠', '‰Ωé'].includes(item.priority) &&
                typeof item.progress === 'number' &&
                item.progress >= 0 &&
                item.progress <= 100
            );
        };

        // „Çø„Éñ„ÅÆÂÜÖÂÆπ„ÅÆÂûã„ÇíÊ§úË®º
        const isValidTabContent = (content) => {
            return Array.isArray(content) && content.every(isValidTodoItem);
        };

        // „Ç§„É≥„Éù„Éº„Éà„Éá„Éº„ÇøÂÖ®‰Ωì„ÅÆÊßãÈÄ†„ÇíÊ§úË®º
        const isValidImportData = (data) => {
            return (
                typeof data === 'object' &&
                data !== null &&
                Object.keys(data).length > 0 &&
                Object.values(data).every(isValidTabContent)
            );
        };

        const importTodos = (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        if (Array.isArray(importedData)) {
                            // Êóß„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅÆ„Éá„Éº„Çø
                            if (importedData.every(isValidTodoItem)) {
                                setLegacyImportData(importedData);
                                setIsLegacyImportDialogVisible(true);
                            } else {
                                throw new Error('Invalid legacy data structure');
                            }
                        } else if (isValidImportData(importedData)) {
                            // Êñ∞„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅÆ„Éá„Éº„Çø
                            handleNewFormatImport(importedData);
                        } else {
                            throw new Error('Invalid data structure');
                        }
                    } catch (error) {
                        console.error('Import error:', error);
                        setAlertMessage('„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„Éï„Ç°„Ç§„É´„ÅåÊ≠£„Åó„ÅÑÂΩ¢Âºè„Åß„ÅÇ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                        setIsAlertVisible(true);
                    }
                };
                reader.readAsText(file);
            }
        };

        const handleNewFormatImport = (importedData) => {
            setTodosPerTab(prevTabs => {
                const updatedTabs = { ...prevTabs };
                Object.keys(importedData).forEach(tab => {
                    if (isValidTabContent(importedData[tab])) {
                        updatedTabs[tab] = importedData[tab];
                    }
                });
                return updatedTabs;
            });

            setTabs(prevTabs => {
                const newTabs = new Set([...prevTabs, ...Object.keys(importedData)]);
                return Array.from(newTabs);
            });

            setAlertMessage('„Çø„Çπ„ÇØ„ÅåÊ≠£Â∏∏„Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Åæ„Åó„Åü„ÄÇ');
            setIsAlertVisible(true);
        };

        const handleLegacyImport = () => {
            if (legacyImportData && legacyImportData.every(isValidTodoItem)) {
                setTodosPerTab(prevTabs => ({
                    ...prevTabs,
                    „É°„Ç§„É≥: [...prevTabs.„É°„Ç§„É≥, ...legacyImportData]
                }));
                setLegacyImportData(null);
                setIsLegacyImportDialogVisible(false);
                setAlertMessage('Êóß„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅÆ„Çø„Çπ„ÇØ„ÅåÊ≠£Â∏∏„Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Åæ„Åó„Åü„ÄÇ');
                setIsAlertVisible(true);
            } else {
                setAlertMessage('ÁÑ°Âäπ„Å™Êóß„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Éá„Éº„Çø„Åß„Åô„ÄÇ„Ç§„É≥„Éù„Éº„Éà„Åß„Åç„Åæ„Åõ„Çì„ÄÇ');
                setIsAlertVisible(true);
            }
        };

        const cancelLegacyImport = () => {
            setLegacyImportData(null);
            setIsLegacyImportDialogVisible(false);
        };

        // „Éï„Ç°„Ç§„É´ÈÅ∏Êäû„Çí„É™„Çª„ÉÉ„Éà„Åô„ÇãÈñ¢Êï∞
        const resetFileInput = () => {
            if (fileInputRef.current) {
                fileInputRef.current.value = '';
            }
        };

        // ÂÖ®„Çø„Çπ„ÇØÂâäÈô§Á¢∫Ë™ç„ÉÄ„Ç§„Ç¢„É≠„Ç∞Ë°®Á§∫Èñ¢Êï∞
        const showDeleteConfirm = () => {
            setIsDeleteConfirmVisible(true);
        };

        // ÂÖ®„Çø„Çπ„ÇØÂâäÈô§Èñ¢Êï∞
        const clearAllTodos = () => {
            setTodosPerTab(prev => ({
                ...prev,
                [activeTab]: []
            }));
            setIsDeleteConfirmVisible(false);
            setAlertMessage(`${activeTab}„Çø„Éñ„ÅÆÂÖ®„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÅåÂâäÈô§„Åï„Çå„Åæ„Åó„Åü„ÄÇ`);
            setIsAlertVisible(true);
        };

        // ÂÖ®„Çø„Çπ„ÇØÂâäÈô§„Ç≠„É£„É≥„Çª„É´Èñ¢Êï∞
        const cancelDelete = () => {
            setIsDeleteConfirmVisible(false);
        };

        // ÂÖ®‰Ωì„ÅÆÈÄ≤ÊçóË®àÁÆóÈñ¢Êï∞
        const calculateOverallProgress = () => {
            const todos = todosPerTab[activeTab];
            if (todos.length === 0) return { done: 0, inProgress: 0, notDoing: 0, total: 0 };
            
            const totalTasks = todos.length;
            const notDoingTasks = todos.filter(todo => todo.estimate < 0);
            const completedTasks = todos.filter(todo => todo.completed && todo.estimate >= 0);
            const inProgressTasks = todos.filter(todo => !todo.completed && todo.estimate >= 0);
            
            const notDoingPercentage = (notDoingTasks.length / totalTasks) * 100;
            const completedPercentage = (completedTasks.length / totalTasks) * 100;
            
            const inProgressPercentage = inProgressTasks.reduce((sum, todo) => {
                return sum + (todo.progress / totalTasks);
            }, 0);
            
            const totalProgress = completedPercentage + inProgressPercentage + notDoingPercentage;
            
            return {
                done: Math.round(completedPercentage),
                inProgress: Math.round(inProgressPercentage),
                notDoing: Math.round(notDoingPercentage),
                total: Math.round(totalProgress)
            };
        };

        // „Ç≠„ÉºÊäº‰∏ãÊôÇ„ÅÆ„Éè„É≥„Éâ„É©Èñ¢Êï∞
        const handleKeyPress = (event, action) => {
            if (event.key === 'Enter') {
                action();
            }
        };

        // ËøΩÂä†„Éú„Çø„É≥„ÅÆÁÑ°ÂäπÂåñÊù°‰ª∂Èñ¢Êï∞
        const isAddButtonDisabled = () => {
            return !newTodo.trim() || !newEstimate || parseFloat(newEstimate) <= 0;
        };

        // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Åï„Çå„ÅüToDoÈÖçÂàó
        const [filteredTodos, setFilteredTodos] = useState([]);

        useEffect(() => {
            const newFilteredTodos = todosPerTab[activeTab].filter(todo => 
                (priorityFilter === 'all' || todo.priority === priorityFilter) &&
                (showCompletedTasks || !todo.completed || todo.estimate < 0)
            );
            setFilteredTodos(newFilteredTodos);
        }, [todosPerTab, activeTab, priorityFilter, showCompletedTasks]);
        
        const taskCounts = getTaskCounts();
        const taskTimes = calculateTimes();

        // „É≠„Éº„Éá„Ç£„É≥„Ç∞‰∏≠„ÅÆ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        const LoadingComponent = () => (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="text-green-500 text-2xl">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
            </div>
        );

        // „É°„Ç§„É≥„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        if (isLoading) {
            return <LoadingComponent />;
        }

        // JSX„ÇíËøî„Åô
        return (
            <div className={`max-w-full sm:max-w-4xl mx-auto mt-4 sm:mt-10 p-2 sm:p-6 rounded-lg shadow-lg ${
                getThemeClasses('border border-green-500', 'border-2 border-gray-300')
            }`} style={getThemeStyles()}>
            <DynamicHeader />

            <Tabs tabs={tabs} activeTab={activeTab} onTabChange={handleTabChange} />
                
                {/* „Çø„Çπ„ÇØÂÖ•Âäõ„Ç®„É™„Ç¢ */}
                <div className="flex flex-col sm:flex-row mb-4 space-y-2 sm:space-y-0 sm:space-x-2">
                    {/* ‰∏äÊÆµÔºö„Çø„Çπ„ÇØÂêçÂÖ•Âäõ */}
                    <div className="relative w-full sm:w-auto flex-grow">
                        <Input
                            ref={inputRef}
                            value={newTodo}
                            onChange={handleInputChange}
                            onKeyDown={handleKeyDown}
                            onBlur={handleInputBlur}
                            placeholder="Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíÂÖ•Âäõ..."
                            className="w-full text-sm sm:text-base"
                        />
                        {suggestions.length > 0 && (
                            <SuggestionList
                                ref={suggestionsRef}
                                suggestions={suggestions}
                                selectedIndex={selectedSuggestion}
                                onSelect={(suggestion) => {
                                    setNewTodo(suggestion);
                                    setSuggestions([]);
                                }}
                            />
                        )}
                    </div>
                    
                    {/* ‰∏ãÊÆµÔºöÊôÇÈñì„ÄÅÂÑ™ÂÖàÂ∫¶„ÄÅ„Åô„Çã/„Åó„Å™„ÅÑ„Éú„Çø„É≥„ÄÅËøΩÂä†„Éú„Çø„É≥ */}
                    <div className="w-full sm:w-auto flex space-x-1 sm:space-x-2">
                        <Input
                            type="number"
                            value={newEstimate}
                            onChange={(e) => setNewEstimate(e.target.value)}
                            placeholder="ÊôÇÈñì"
                            className="w-16 sm:w-20 text-xs sm:text-sm"
                            min="0.1"
                            step="0.1"
                            required
                        />
                        <Select 
                            value={newPriority} 
                            onValueChange={setNewPriority}
                            className="w-16 sm:w-20 text-xs sm:text-sm"
                        >
                            <option value="È´ò">È´ò</option>
                            <option value="‰∏≠">‰∏≠</option>
                            <option value="‰Ωé">‰Ωé</option>
                        </Select>
                        <Button 
                            onClick={() => setNewIsNegative(!newIsNegative)} 
                            onKeyPress={(e) => handleKeyPress(e, () => setNewIsNegative(!newIsNegative))}
                            className={`w-20 sm:w-24 text-xs sm:text-sm ${newIsNegative ? 'bg-red-500' : ''}`}
                            tabIndex="0"
                        >
                            {newIsNegative ? '„Åó„Å™„ÅÑ' : '„Åô„Çã'}
                        </Button>
                        <Button 
                            onClick={addTodo} 
                            className="w-20 sm:w-24 whitespace-nowrap text-xs sm:text-sm"
                            disabled={isAddButtonDisabled()}
                        >
                            Ôºã ËøΩÂä†
                        </Button>
                    </div>
                </div>

                {/* „Çπ„ÉÜ„Éº„Çø„Çπ„Ç®„É™„Ç¢ */}
                <div className={getThemeClasses(
                    'cyber-stats mb-4 p-3 rounded bg-gray-900',
                    'theme-paperpen mb-4 p-3 rounded bg-white shadow-md'
                )}>
                    <div className="grid grid-cols-3 gap-2 sm:gap-4 text-xs sm:text-sm">
                        {[
                            { title: 'Êú™ÂÆå‰∫Ü„Çø„Çπ„ÇØ', count: taskCounts.remaining, time: taskTimes.remaining, color: 'green' },
                            { title: 'ÂÆå‰∫ÜÊ∏à„Çø„Çπ„ÇØ', count: taskCounts.completed, time: taskTimes.completed, color: 'blue' },
                            { title: '„Åó„Å™„ÅÑ„Çø„Çπ„ÇØ', count: taskCounts.notDoing, time: taskTimes.notDoing, color: 'red' }
                        ].map((item, index) => (
                            <div key={index} className={getThemeClasses(
                                'bg-gray-800 p-2 sm:p-3 rounded',
                                'bg-gray-100 p-2 sm:p-3 rounded shadow'
                            )}>
                                <h3 className={`text-sm sm:text-base font-bold mb-1 sm:mb-2 truncate ${
                                    getThemeClasses(`text-${item.color}-400`, `text-${item.color}-600`)
                                }`}>
                                    {item.title}
                                </h3>
                                <div className="flex items-center justify-between mb-1">
                                    <span className="mr-1">{index === 0 ? 'üìã' : index === 1 ? '‚úÖ' : 'üö´'}</span>
                                    <span className={`font-bold text-base sm:text-lg w-14 text-right ${
                                        getThemeClasses('text-green', 'text-gray-800')
                                    }`}>
                                        {formatCount(item.count)}
                                        <span className="invisible text-xs sm:text-sm ml-1">h</span>
                                    </span>
                                </div>
                                <div className="flex items-center justify-between">
                                    <span className="mr-1">‚è±Ô∏è</span>
                                    <span className={`font-bold text-base sm:text-lg w-14 text-right ${
                                        getThemeClasses('text-green', 'text-gray-800')
                                    }`}>
                                        {formatTime(item.time)}
                                        <span className="text-xs sm:text-sm ml-1">h</span>
                                    </span>
                                </div>
                            </div>
                        ))}
                    </div>
                    <div className="mt-3">
                        <div className="text-sm mb-1 flex flex-col sm:flex-row justify-between items-start sm:items-center">
                            <span>
                                ÂÖ®‰Ωì„ÅÆÈÄ≤Êçó: {calculateOverallProgress().total}% / ÂÆå‰∫Ü: {calculateOverallProgress().done}% / {calculateOverallProgress().notDoing}% „Åó„Å™„ÅÑ
                            </span>
                            <span className={`text-sm ${getThemeClasses('text-green-400', 'text-blue-600')} font-bold mt-1 sm:mt-0`}>
                                {getEncouragementMessage(calculateOverallProgress().total, calculateOverallProgress().done)}
                            </span>
                        </div>
                        <div className="w-full bg-gray-700 rounded-full h-2.5 relative overflow-hidden">
                            <div 
                                className="absolute top-0 left-0 bg-green-600 h-full" 
                                style={{width: `${calculateOverallProgress().done}%`}}
                            ></div>
                            <div 
                                className="absolute top-0 left-0 bg-yellow-400 h-full" 
                                style={{width: `${calculateOverallProgress().inProgress}%`, left: `${calculateOverallProgress().done}%`}}
                            ></div>
                            <div 
                                className="absolute top-0 right-0 bg-red-600 h-full" 
                                style={{width: `${calculateOverallProgress().notDoing}%`}}
                            ></div>
                        </div>
                    </div>
                </div>

                {/* „Éï„Ç£„É´„Çø„Éº„Ç®„É™„Ç¢ */}
                <div className={`mb-4 overflow-x-auto relative rounded ${
                    getThemeClasses('bg-gray-800', 'bg-white shadow-md')
                }`}>
                    <div className="flex items-center space-x-2 sm:space-x-4 p-2 min-w-max relative">
                        <label htmlFor="priority-filter" className={`inline-flex items-center space-x-2 px-3 py-2 rounded text-xs sm:text-sm shadow-md transition-shadow duration-300 whitespace-nowrap ${
                            getThemeClasses('cyber-button bg-gray-700 text-green-400', 'bg-gray-200 text-gray-800')
                        }`}>
                            <span>&#x1F50D;</span>
                            <span>ÂÑ™ÂÖàÂ∫¶Ôºö</span>
                            <select
                                id="priority-filter"
                                value={priorityFilter}
                                onChange={(e) => setPriorityFilter(e.target.value)}
                                className={getThemeClasses(
                                    'bg-transparent border-none text-green-200 focus:outline-none',
                                    'bg-white border-none text-gray-800 focus:outline-none'
                                )}
                            >
                                <option value="all">ÂÖ®„Å¶</option>
                                <option value="È´ò">È´ò</option>
                                <option value="‰∏≠">‰∏≠</option>
                                <option value="‰Ωé">‰Ωé</option>
                            </select>
                        </label>

                        <ToggleButton
                            isOn={showCompletedTasks}
                            onToggle={toggleCompletedTasks}
                            onLabel="ÂÆå‰∫ÜÊ∏à„Çø„Çπ„ÇØ„ÇíË°®Á§∫‰∏≠"
                            offLabel="ÂÆå‰∫ÜÊ∏à„Çø„Çπ„ÇØ„ÇíÈùûË°®Á§∫‰∏≠"
                            theme={currentTheme}
                        />

                        <ToggleButton
                            isOn={countAllTasks}
                            onToggle={toggleCountAllTasks}
                            onLabel="ÂÖ®„Çø„Çπ„ÇØ„Çí„Ç´„Ç¶„É≥„Éà‰∏≠"
                            offLabel="Ë°®Á§∫„Çø„Çπ„ÇØ„ÅÆ„Åø„Ç´„Ç¶„É≥„Éà‰∏≠"
                            theme={currentTheme}
                        />
                    </div>
                    {isMobile && (
                        <div className="absolute right-0 top-1/2 transform -translate-y-1/2">
                            <AnimatedScrollGuide theme={currentTheme} />
                        </div>
                    )}
                </div>

                <ul className="space-y-2 mb-4">
                    {filteredTodos.map(todo => (
                        <li
                            key={todo.id}
                            data-id={todo.id}
                            className={`p-2 sm:p-3 rounded text-xs sm:text-sm flex items-center cyber-list-item ${
                                todo.estimate < 0 ? 'bg-red-900' : 
                                todo.completed ? 'bg-green-900' : ''
                            } ${isDragging && draggedItemId === todo.id ? 'dragging' : ''}`}
                            onDragOver={(e) => handleDragOver(e, todo.id)}
                            onDrop={(e) => handleDrop(e, todo.id)}
                        >
                        <div
                            className="drag-handle mr-1 text-xl"
                            draggable="true"
                            onDragStart={(e) => handleDragStart(e, todo.id)}
                            onDragEnd={handleDragEnd}
                            onTouchStart={(e) => handleTouchStart(e, todo.id)}
                            onTouchEnd={handleTouchEnd}
                        >
                            ‚ãÆ‚ãÆ
                        </div>
                            <div className="flex-grow">
                            <div className="flex items-center mb-2">
                                <button
                                onClick={() => toggleTodo(todo.id)}
                                className={`mr-2 flex-shrink-0 w-6 h-6 rounded-full border-2 ${
                                    todo.estimate < 0 ? 'border-red-500 bg-red-500' :
                                    todo.completed ? 'border-green-500 bg-green-500' : 'border-yellow-500'
                                }`}
                                >
                                {todo.estimate < 0 ? '‚úó' : todo.completed ? '‚úì' : ''}
                                </button>
                                
                                {editingTaskId === todo.id ? (
                                <input
                                    type="text"
                                    value={editingValues[todo.id] !== undefined ? editingValues[todo.id] : todo.text}
                                    onChange={(e) => {
                                    setEditingValues(prev => ({ ...prev, [todo.id]: e.target.value }));
                                    }}
                                    onCompositionStart={() => {
                                    setComposingStates(prev => ({ ...prev, [todo.id]: true }));
                                    }}
                                    onCompositionEnd={(e) => {
                                    setComposingStates(prev => ({ ...prev, [todo.id]: false }));
                                    updateTaskText(todo.id, e.target.value);
                                    }}
                                    onBlur={() => {
                                    setEditingTaskId(null);
                                    setComposingStates(prev => ({ ...prev, [todo.id]: false }));
                                    updateTaskText(todo.id, editingValues[todo.id] !== undefined ? editingValues[todo.id] : todo.text);
                                    }}
                                    onKeyDown={(e) => {
                                    if (e.key === 'Enter' && !composingStates[todo.id]) {
                                        setEditingTaskId(null);
                                        setComposingStates(prev => ({ ...prev, [todo.id]: false }));
                                        updateTaskText(todo.id, editingValues[todo.id] !== undefined ? editingValues[todo.id] : todo.text);
                                    } else if (e.key === 'Escape') {
                                        setEditingTaskId(null);
                                        setEditingValues(prev => ({ ...prev, [todo.id]: todo.text }));
                                    }
                                    }}
                                    className="no-zoom flex-grow mr-2 bg-transparent border-b border-green-500 focus:outline-none"
                                    autoFocus
                                />
                                ) : (
                                <span 
                                className={`task-text flex-grow mr-2 ${todo.completed || todo.estimate < 0 ? 'line-through' : ''}`}
                                onClick={(e) => {
                                    e.preventDefault(); // „ÉÜ„Ç≠„Çπ„ÉàÈÅ∏Êäû„ÇíÈò≤„Åê
                                    setEditingTaskId(todo.id);
                                    setEditingValues(prev => ({ ...prev, [todo.id]: todo.text }));
                                }}
                                    title={todo.text}
                                >
                                    {todo.text || '(Á©∫„ÅÆ„Çø„Çπ„ÇØ)'}
                                </span>
                                )}
                                <div className="flex items-center space-x-1 sm:space-x-2 ml-auto">
                                <div className="flex items-center">
                                    <span className="mr-1">‚è±Ô∏è</span>
                                    <Input
                                    type="number"
                                    value={Math.abs(todo.estimate)}
                                    onChange={(e) => updateEstimate(todo.id, todo.estimate < 0 ? -Math.abs(e.target.value) : Math.abs(e.target.value))}
                                    className="cyber-input rounded px-2 py-1 w-12 sm:w-16 text-xs sm:text-sm"
                                    min="0"
                                    step="0.1"
                                    />
                                    <span className="ml-1 text-xs sm:text-sm">h</span>
                                </div>
                                <Select 
                                    value={todo.priority} 
                                    onValueChange={(value) => updatePriority(todo.id, value)}
                                    className="w-14 sm:w-16 text-xs sm:text-sm"
                                >
                                    <option value="È´ò">È´ò</option>
                                    <option value="‰∏≠">‰∏≠</option>
                                    <option value="‰Ωé">‰Ωé</option>
                                </Select>
                                <span className={`flex-shrink-0 ${priorityColors[todo.priority]}`}>‚öë</span>
                                <Button onClick={() => deleteTodo(todo.id)} className="text-red-500 hover:text-red-700 flex-shrink-0 text-xs sm:text-sm">
                                    ‚úó
                                </Button>
                                </div>
                            </div>
                            <ProgressBar 
                                value={todo.progress} 
                                onChange={(e) => updateProgress(todo.id, parseInt(e.target.value))} 
                                disabled={todo.completed || todo.estimate < 0}
                            />
                            </div>
                        </li>
                        ))}
                </ul>
                <div className="flex justify-between mb-4">
                    <Button onClick={exportTodos} className="mr-2">
                        üíæ „Çª„Éº„Éñ
                    </Button>
                    <div>
                        <input
                            type="file"
                            ref={fileInputRef}
                            style={{ display: 'none' }}
                            onChange={(e) => {
                                importTodos(e);
                                resetFileInput();
                            }}
                            accept=".json"
                        />
                        <Button onClick={() => fileInputRef.current.click()} className="mr-2">
                            üîÉ „É≠„Éº„Éâ
                        </Button>
                    </div>
                    <Button onClick={showDeleteConfirm} className="bg-red-500 hover:bg-red-600">
                        üóëÔ∏è ÂÖ®„Å¶Ê∂àÂéª
                    </Button>
                </div>

                <div className="text-center text-xs sm:text-sm text-gray-500 mb-2">
                    &copy; 2024 „ÇÜ„ÇãToDo All Rights Reserved.
                    <br />
                    Âà∂‰Ωú: „Åü„Å¨ | „Ç≥„Éº„Éá„Ç£„É≥„Ç∞ÂçîÂäõ: Claude 3.5
                    <br />
                    <span className="text-xs">Version 2.0.0 "Cyber ToDo" (2024-07-03 23:30)</span>
                </div>
                <div className="text-center text-xs text-gray-400 mt-4">
                    <p>This application uses React, ReactDOM, Babel, and Tailwind CSS, which are licensed under the MIT License.</p>
                    <p>
                        <a href="https://opensource.org/licenses/MIT" className="underline hover:text-gray-300" target="_blank" rel="noopener noreferrer">
                            MIT License
                        </a>
                    </p>
                </div>

                {/* „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´ÂÜçÈñã„Éú„Çø„É≥„Éª„ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà„Éú„Çø„É≥ */}
                <div className="mt-4 flex flex-row justify-center items-center space-x-2">
                    <Button 
                        onClick={restartTutorial} 
                        className={`flex-1 px-2 py-1 text-xs sm:text-sm ${getThemeClasses('bg-blue-500 hover:bg-blue-600', 'bg-blue-100 hover:bg-blue-200 text-blue-800')}`}
                        title="„Ç¢„Éó„É™„ÅÆ‰Ωø„ÅÑÊñπ„ÇíÂÜçÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô"
                    >
                        <span className="sm:hidden">üìò „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´</span>
                        <span className="hidden sm:inline">üìò „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´</span>
                    </Button>
                    <Button 
                        onClick={toggleTheme} 
                        className={`flex-1 px-2 py-1 text-xs sm:text-sm ${getThemeClasses('bg-green-500 hover:bg-green-600', 'bg-gray-300 hover:bg-gray-400 text-gray-800')}`}
                        title={currentTheme === 'cyberpunk' ? 'Á¥ô„Å®„Éö„É≥È¢®„ÅÆ„Éá„Ç∂„Ç§„É≥„Å´Âàá„ÇäÊõø„Åà„Åæ„ÅôÔºàŒ≤ÁâàÔºâ' : '„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØÈ¢®„ÅÆ„Éá„Ç∂„Ç§„É≥„Å´Âàá„ÇäÊõø„Åà„Åæ„Åô'}
                    >
                        <span className="sm:hidden">{currentTheme === 'cyberpunk' ? 'üñãÔ∏èÁ¥ô„Éö„É≥È¢®„ÉÜ„Éº„ÉûÔºàŒ≤Ôºâ' : 'üåê„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØÈ¢®'}</span>
                        <span className="hidden sm:inline">{currentTheme === 'cyberpunk' ? 'üñãÔ∏è Á¥ô„Éö„É≥È¢®„ÉÜ„Éº„ÉûÔºàŒ≤Ôºâ' : 'üåê „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØÈ¢®'}</span>
                    </Button>
                </div>

                {/* „ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà */}
                {showTutorial && <TutorialComponent />}

                {/* Enhanced Cyberpunk-style Log */}
                <div className="mt-6 p-4 bg-black bg-opacity-50 border border-green-500 rounded-lg text-green-400 font-mono text-xs">
                    <div className="mb-2 text-green-500 text-sm">[System Log]</div>
                    
                    {/* Current Status */}
                    <div className="mb-4">
                        <div className="text-yellow-500">[Current Status]</div>
                        {getLogMessages().map((message, index) => (
                            <div key={index} className="flex items-start">
                                <span className="mr-2 text-blue-400">[INFO]</span>
                                <span>{message}</span>
                            </div>
                        ))}
                        {getLogMessages().length === 0 && (
                            <div className="flex items-start">
                                <span className="mr-2 text-blue-400">[INFO]</span>
                                <span>ÂÖ®„Çø„Çπ„ÇØË°®Á§∫‰∏≠</span>
                            </div>
                        )}
                    </div>

                    {/* System Info */}
                    <div className="mb-4">
                        <div className="text-yellow-500">[System Info]</div>
                        <div className="flex items-start">
                            <span className="mr-2 text-blue-400">[DATA]</span>
                            <span>„Éá„Éº„Çø„ÅØ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô</span>
                        </div>
                        <div className="flex items-start">
                            <span className="mr-2 text-red-400">[WARN]</span>
                            <span>Êú¨„Ç¢„Éó„É™„ÅÆ‰ΩøÁî®„ÅØËá™Â∑±Ë≤¨‰ªª„Åß„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô</span>
                        </div>
                    </div>

                    {/* Version Info */}
                    <div className="mb-4">
                        <div className="text-yellow-500">[Version Info]</div>
                        <div className="flex items-start">
                            <span className="mr-2 text-purple-400">[VER ]</span>
                            <span>Current Version: {appVersion}</span>
                        </div>
                    </div>

                    {/* Update History */}
                    <div>
                        <div className="text-yellow-500">[Update History]</div>
                        {updateHistory.map((update, index) => (
                            <div key={index} className="flex items-start">
                                <span className="mr-2 text-green-400">[{update.version}]</span>
                                <span>{update.description}</span>
                            </div>
                        ))}
                    </div>
                </div>
                
                <CyberAlert
                    message={alertMessage}
                    isVisible={isAlertVisible}
                    onClose={() => setIsAlertVisible(false)}
                />

                {isDeleteConfirmVisible && (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                        <div className="bg-gray-900 border-2 border-green-500 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                            <p className="text-green-500 mb-4">ÁèæÂú®ÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Çã„Çø„Éñ„ÅÆ„ÄÅÂÖ®„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂâäÈô§„Åó„Åæ„Åô„ÄÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü</p>
                            <div className="flex justify-end space-x-4">
                                <Button onClick={clearAllTodos} className="bg-red-500 hover:bg-red-600">
                                    „ÅØ„ÅÑ
                                </Button>
                                <Button onClick={cancelDelete}>
                                    „ÅÑ„ÅÑ„Åà
                                </Button>
                            </div>
                        </div>
                    </div>
                )}

                {isLegacyImportDialogVisible && (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                        <div className="bg-gray-900 border-2 border-green-500 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                            <p className="text-green-500 mb-4">Êóß„Éê„Éº„Ç∏„Éß„É≥„ÅÆjson„Éï„Ç°„Ç§„É´„ÇíÂæ©ÂÖÉ„Åó„Åæ„Åô„ÄÇ„É°„Ç§„É≥„Çø„Éñ„Å´Âæ©ÂÖÉ„Åï„Çå„Åæ„Åô„ÄÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü</p>
                            <div className="flex justify-end space-x-4">
                                <Button onClick={handleLegacyImport} className="bg-green-500 hover:bg-green-600">
                                    „ÅØ„ÅÑ
                                </Button>
                                <Button onClick={cancelLegacyImport}>
                                    „ÅÑ„ÅÑ„Åà
                                </Button>
                            </div>
                        </div>
                    </div>
                )}

            </div>
        );
    };
        
    ReactDOM.render(<TodoApp />, document.getElementById('root'));
    </script>
</body>
</html>